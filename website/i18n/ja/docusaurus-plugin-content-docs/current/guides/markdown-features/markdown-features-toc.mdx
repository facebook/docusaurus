---
id: toc
description: Markdownの見出しと目次をカスタマイズする
slug: /markdown-features/toc
---

import BrowserWindow from '@site/src/components/BrowserWindow';

# 見出しと目次

## Markdown headings {#markdown-headings}

You can use regular Markdown headings.

```md
## Level 2 title

### Level 3 title

#### Level 4 title
```

Markdownの各見出しは、目次の項目として表示されます。

### 見出しID {#heading-ids}

各見出しにはIDがあり、自動生成または明示的に指定することができます。 見出しIDによって、以下のようなMarkdownやJSXで特定の文書の見出しにリンクすることができます。

```md
[link](#heading-id)
```

```jsx
<Link to="#heading-id">link</Link>
```

デフォルトでは、Docusaurusは見出しのテキストに基づいて見出しIDを生成します。 例えば、「`### Hello World`」は「`hello-world`」というIDを持つことになります。

生成されたIDには**次のようないくつかの制限があります**。

- IDの見た目が悪い場合がある
- 既存のIDを更新することなく、テキストを**変更したり翻訳したり**したくてもできない場合がある

A special Markdown syntax lets you set an **explicit heading id**:

```mdx-code-block
<Code language="md">{'### ハローワールド \u007B#my-explicit-id}\n'}</Code>
```

:::tip

**[`write-heading-ids`](../../cli.mdx#docusaurus-write-heading-ids-sitedir)** CLIコマンドを使用すると、すべてのMarkdown文書に明示的なIDを追加することができます。

:::

:::warning Avoid colliding IDs

生成された見出しIDは各ページで一意であることが保証されますが、カスタムIDを使用する場合は、それぞれが各ページに1つだけあるようにしてください。そうしないと、同じIDを持つ2つのDOM要素が存在することになりますが、これは無効なHTMLセマンティクスであり、一つの見出しがリンク不能となることに繋がります。

:::

## 目次の見出しレベル {#table-of-contents-heading-level}

各Markdownドキュメントには、右上に目次が表示されます。 デフォルトでは、この目次にはh2およびh3の見出しのみが表示されますが、ページ構造の概要を知るには十分でしょう。 見出しの表示範囲を変更する必要がある場合、最小および最大の見出しレベルをページごとまたはグローバルにカスタマイズすることができます。

特定のページの見出しレベルを設定するには、フロントマター内で`toc_min_heading_level`と`toc_max_heading_level`を使用します。

```md title="myDoc.md"
---
# h2〜h5の見出しを表示
toc_min_heading_level: 2
toc_max_heading_level: 5
---
```

_すべての_ページの見出しレベルを設定するには、以下のように[`themeConfig.tableOfContents`](../../api/themes/theme-configuration.mdx#table-of-contents)オプションを使用します。

```js title="docusaurus.config.js"
export default {
  themeConfig: {
    tableOfContents: {
      // highlight-start
      minHeadingLevel: 2,
      maxHeadingLevel: 5,
      // highlight-end
    },
  },
};
```

全体オプションを設定した場合でも、フロントマターによって局所的に上書きすることができます。

:::note

`themeConfig`内のオプションは、[インライン見出し](#inline-table-of-contents)を含むサイト上のすべての目次に適用されますが、フロントマター内のオプションは右上の見出しにのみに影響します。 各`<TOCInline />`コンポーネントをカスタマイズするには、`minHeadingLevel`と`maxHeadingLevel`というプロパティを使用する必要があります。

:::

## インラインの目次 {#inline-table-of-contents}

また、MDXの利用により、Markdown文書内に直接目次を表示することもできます。

`toc` 変数は任意の MDX ドキュメントで使用でき、MDX ドキュメントのすべての見出しが含まれています。 デフォルトでは、 `h2` と `h3` 見出しのみが目次に表示されます。 個々の `TOCInline` コンポーネントに対して `minHeadingLevel` または `maxHeadingLevel` を設定することで、どの見出しレベルが表示されるかを変更できます。

{/* prettier-ignore */}
```jsx
import TOCInline from '@theme/TOCInline';

<TOCInline toc={toc} />
```

```mdx-code-block
import TOCInline from '@theme/TOCInline';

<BrowserWindow>
<TOCInline toc={toc} />
</BrowserWindow>
```

The `toc` global is just a list of heading items:

```ts
declare const toc: {
  value: string;
  id: string;
  level: number;
}[];
```

`toc` グローバルはフラット配列であることに注意してください。 不要なノードを簡単に切り取ったり、追加のノードを挿入したり、新しい目次ツリーを作成したりできます。

{/* prettier-ignore */}
```jsx
import TOCInline from '@theme/TOCInline';

<TOCInline
  // Only show h2 and h4 headings
  toc={toc.filter((node) => node.level === 2 || node.level === 4)}
  minHeadingLevel={2}
  // Show h4 headings in addition to the default h2 and h3 headings
  maxHeadingLevel={4}
/>
```

```mdx-code-block
<BrowserWindow>
<TOCInline
  toc={toc.filter((node) => node.level === 2 || node.level === 4)}
  minHeadingLevel={2}
  maxHeadingLevel={4}
/>
</BrowserWindow>
```

## 目次の生成をカスタマイズ {#customizing-table-of-contents-generation}

The table-of-contents is generated by parsing the Markdown source with a [Remark plugin](./markdown-features-plugins.mdx). There are known edge-cases where it generates false-positives and false-negatives.

Markdown headings within hideable areas will still show up in the TOC. For example, headings within [`Tabs`](./markdown-features-tabs.mdx) and [`details`](./markdown-features-intro.mdx#details) will not be excluded.

Non-Markdown headings will not show up in the TOC. This can be used to your advantage to tackle the aforementioned issue.

```md
<details>
<summary>Some details containing headings</summary>
<h2 id="#heading-id">I'm a heading that will not show up in the TOC</h2>

Some content...

</details>
```

The ability to ergonomically insert extra headings or ignore certain headings is a work-in-progress. If this feature is important to you, please report your use-case in [this issue](https://github.com/facebook/docusaurus/issues/6201).

---

:::warning

Below is just some dummy content to have more table of contents items available on the current page.

:::

## セクション 1 の例 {#example-section-1}

Lorem ipsum

### 例 サブセクション 1 a {#example-subsection-1-a}

Lorem ipsum

#### 例サブセクション 1 a I

#### 例サブセクション 1 a II

#### Example subsubsection 1 a III

### Example Subsection 1 b {#example-subsection-1-b}

Lorem ipsum

#### Example subsubsection 1 b I

#### Example subsubsection 1 b II

#### Example subsubsection 1 b III

### Example Subsection 1 c {#example-subsection-1-c}

Lorem ipsum

#### Example subsubsection 1 c I

#### Example subsubsection 1 c II

#### Example subsubsection 1 c III

## Example Section 2 {#example-section-2}

Lorem ipsum

### Example Subsection 2 a {#example-subsection-2-a}

Lorem ipsum

#### Example subsubsection 2 a I

#### Example subsubsection 2 a II

#### Example subsubsection 2 a III

### Example Subsection 2 b {#example-subsection-2-b}

Lorem ipsum

####

#### Example subsubsection 2 b II

#### Example subsubsection 2 b III

### Example Subsection 2 c {#example-subsection-2-c}

Lorem ipsum

#### Example subsubsection 2 c I

#### Example subsubsection 2 c II

#### Example subsubsection 2 c III

## Example Section 3 {#example-section-3}

Lorem ipsum

### Example Subsection 3 a {#example-subsection-3-a}

Lorem ipsum

#### Example subsubsection 3 a I

#### Example subsubsection 3 a II

#### Example subsubsection 3 a III

### Example Subsection 3 b {#example-subsection-3-b}

Lorem ipsum

#### Example subsubsection 3 b I

#### Example subsubsection 3 b II

#### Example subsubsection 3 b III

### Example Subsection 3 c {#example-subsection-3-c}

Lorem ipsum

#### Example subsubsection 3 c I

#### Example subsubsection 3 c II

#### Example subsubsection 3 c III
