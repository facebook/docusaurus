---
id: math-equations
description: LaTeX数式の書き方
slug: /markdown-features/math-equations
---

# 数式

import BrowserWindow from '@site/src/components/BrowserWindow';

[KaTeX](https://katex.org)を利用して数式をレンダリングできます。

See [below](#configuration) how to activate them.

## 使い方 {#usage}

Please read the [KaTeX](https://katex.org) documentation for more details.

### インライン数式 {#inline}

インライン数式は、LaTeX式を`$`で次のように囲って書きます。

```latex
$f\colon[a,b]\to\R$をリーマン積分可能な関数とする。 $F\colon[a,b]\to\R$を$F(x)=\int_{a}^{x} f(t)\,dt$と定義する。 このとき、$F$は連続であり、$f$が$x$において連続である全ての$x$において$F$は$x$において微分可能であり、$F'(x)=f(x)$となる。
```

<BrowserWindow>

$f\colon [a,b] \to \R$ をリーマン積分可能な関数とする。 $F\colon[a,b]\to\R$ を$F(x)= \int_{a}^{x} f(t),dt$と定義する。 このとき、$F$は連続であり、$f$が$x$において連続である全ての$x$において$F$は$x$において微分可能であり、$F'(x)=f(x)$となる。

</BrowserWindow>

### 別行立て数式 {#blocks}

数式ブロックすなわちディスプレイモードの場合は、改行と`$$`を利用して次のように書きます。

```latex
$$
I = \int_0^{2\pi} \sin(x)\,dx
$$
```

<BrowserWindow>

$$
I = \int_0^{2\pi} \sin(x)\,dx
$$

</BrowserWindow>

## 数式を有効化する {#configuration}

次の手順でKaTeXを有効化してください。

1.  次のように、`remark-math`と`rehype-katex`プラグインをインストールしてください。

    ```bash npm2yarn
    npm install --save remark-math@6 rehype-katex@7
    ```

    :::warning

    Docusaurus v3（MDX v3を使用）の場合、必ず`remark-math 6`及び`rehype-katex 7`を利用するようにしてください。 他のバージョンでの動作は保証しかねます。

    :::

2.  これらの2つのプラグインは、 [**ES Modules**](https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c)としてのみ利用可能です。 次のような[**ES Modules**](https://flaviocopes.com/es-modules/)設定ファイルを使用することを推奨します。

    ```js title="ES module docusaurus.config.js"
    // highlight-start
    import remarkMath from 'remark-math';
    import rehypeKatex from 'rehype-katex';
    // highlight-end

    // highlight-start
    export default {
      presets: [
        [
          '@docusaurus/preset-classic',
          {
            docs: {
              path: 'docs',
              // highlight-start
              remarkPlugins: [remarkMath],
              rehypePlugins: [rehypeKatex],
              // highlight-end
            },
          },
        ],
      ],
    };
    ```


     <details>

    <summary> [**CommonJS**](https://nodejs.org/api/modules.html#modules-commonjs-modules) 設定ファイルを使いたい？ </summary>

         If you decide to use a CommonJS config file, it is possible to load those ES module plugins thanks to dynamic imports and an async config creator function:

    ```js title="CommonJS module docusaurus.config.js"
    // highlight-start
    module.exports = async function createConfigAsync() {
      // highlight-end
      return {
        presets: [
          [
            '@docusaurus/preset-classic',
            {
              docs: {
                path: 'docs',
                // highlight-start
                remarkPlugins: [(await import('remark-math')).default],
                rehypePlugins: [(await import('rehype-katex')).default],
                // highlight-end
              },
            },
          ],
        ],
      };
    };
    ```


     </details>

3.  `stylesheets` の下の設定内に、次のようにKaTeXのCSSを含めます。

    ```js
    export default {
      //...
      stylesheets: [
        {
          href: 'https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css',
          type: 'text/css',
          integrity:
            'sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM',
          crossorigin: 'anonymous',
        },
      ],
    };
    ```

<details>
<summary>設定ファイルの例を確認</summary>

```js title="docusaurus.config.js"
// highlight-start
import remarkMath from 'remark-math';
import rehypeKatex from 'rehype-katex';
// highlight-end

export default {
  title: 'Docusaurus',
  tagline: 'Build optimized websites quickly, focus on your content',
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          path: 'docs',
          // highlight-start
          remarkPlugins: [remarkMath],
          rehypePlugins: [rehypeKatex],
          // highlight-end
        },
      },
    ],
  ],
  // highlight-start
  stylesheets: [
    {
      href: 'https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css',
      type: 'text/css',
      integrity:
        'sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM',
      crossorigin: 'anonymous',
    },
  ],
  // highlight-end
};
```

</details>

## KaTeXアセットをセルフホスティングする {#self-hosting-katex-assets}

スタイルシート、フォント、JavaScriptライブラリをCDNソースから読み込むことは、ホストする資産の量を減らせるため、人気のあるライブラリやアセットを利用する上ではよいやり方です。 `katex.min.css`を（必要なKaTeXフォントとともに）セルフホスティングしたい場合は、[KaTeXのGitHubリリース](https://github.com/KaTeX/KaTeX/releases)から最新版をダウンロードし、`katex.min.css`と`fonts`ディレクトリ（`.woff2`フォントタイプだけで十分）をサイトの`static`ディレクトリに展開・コピーし、`docusaurus.config.js`内の、スタイルシートの`href`をCDNのURLからローカルパス（例：`/katex/katex.min.css` ）に置換します。

```js title="docusaurus.config.js"
export default {
  stylesheets: [
    {
      href: '/katex/katex.min.css',
      type: 'text/css',
    },
  ],
};
```
