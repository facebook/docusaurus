---
description: docusaurus.config.jsによるサイトの動作の設定など。
---

# 設定

import TOCInline from '@theme/TOCInline';

:::info

全てのオプションの一覧については、[**`docusaurus.config.js`のAPIリファレンス**](api/docusaurus.config.js.mdx)を参照してください。

:::

Docusaurusは、設定方法に独自の工夫をしています。 私たちは、サイトに関する情報を1つの場所に集めることをお勧めします。 私たちはこのファイルのフィールドを保護し、このデータオブジェクトがサイト全体でアクセスできるようにすることを促進します。

`docusaurus.config.js`をきちんと管理することで、あなたや共著者、オープンソースの貢献者が、サイトをカスタマイズしながらもドキュメント作成に集中することができます。

## `docusaurus.config.js`を宣言する構文 {#syntax-to-declare-docusaurus-config}

`docusaurus.config.js`ファイルはNode.jsで実行され、以下のいずれかをエクスポートする必要があります。

- **設定オブジェクト**
- 設定オブジェクトを生成する**関数**

:::info

The `docusaurus.config.js` file supports:

- [**ES Modules**](https://flaviocopes.com/es-modules/)
- [**CommonJS**](https://flaviocopes.com/commonjs/)
- [**TypeScript**](./typescript-support.mdx#typing-config)

制限事項

- **Required:** use `export default /* your config*/` (or `module.exports`) to export your Docusaurus config
- **任意:** Node.jsから、パッケージをインポートするには、`import Lib from 'lib'` (または `require('lib')`) を使用します。

:::

Docusaurus gives us the ability to declare its configuration in various **equivalent ways**, and all the following config examples lead to the exact same result:

```js title="docusaurus.config.js"
export default {
  title: 'Docusaurus',
  url: 'https://docusaurus.io',
  // your site config ...
};
```

```js title="docusaurus.config.js"
module.exports = {
  title: 'Docusaurus',
  url: 'https://docusaurus.io',
  // your site config ...
};
```

```ts title="docusaurus.config.ts"
import type {Config} from '@docusaurus/types';

export default {
  title: 'Docusaurus',
  url: 'https://docusaurus.io',
  // your site config ...
} satisfies Config;
```

```js title="docusaurus.config.js"
const config = {
  title: 'Docusaurus',
  url: 'https://docusaurus.io,
  // サイト設定 ...
};

export default config;
```

```js title="docusaurus.config.js"
export default function configCreator() {
  return {
    title: 'Docusaurus',
    url: 'https://docusaurus.io',
    // your site config ...
  };
}
```

```js title="docusaurus.config.js"
export default async function createConfigAsync() {
  return {
    title: 'Docusaurus',
    url: 'https://docusaurus.io',
    // your site config ...
  };
}
```

:::tip ESMのみのパッケージの使用

ESMのみのモジュール（特にほとんどのRemarkプラグイン）をインポートするには、非同期の設定作成関数を使用すると便利です。 動的インポートのおかげで、このようなモジュールを次のようにインポートできます。

```js title="docusaurus.config.js"
export default async function createConfigAsync() {
  // Use a dynamic import instead of require('esm-lib')
  // highlight-next-line
  const lib = await import('lib');

  return {
    title: 'Docusaurus',
    url: 'https://docusaurus.io',
    // rest of your site config...
  };
}
```

:::

## `docusaurus.config.js`の中に含まれているもの {#what-goes-into-a-docusaurusconfigjs}

サイトを制作する場合でも、`docusaurus.config.js`を一から書く必要はないはずです。 すべてのテンプレートには、一般的なオプションの初期値を含む`docusaurus.config.js`が付属しています。

しかし、設定がどのように設計され、実装されているのかについて高い水準で理解しておくと役に立つことがあります。

Docusaurusの設定に関する高水準な概要は、以下のように分類されます。

<TOCInline toc={toc} minHeadingLevel={3} maxHeadingLevel={3} />

### サイトのメタデータ {#site-metadata}

サイトメタデータには、`title`、`url`、`baseUrl`、`favicon`などの必須グローバルメタデータが含まれます。

They are used in several places such as your site's title and headings, browser tab icon, social sharing (Facebook, X) information or even to generate the correct path to serve your static files.

### デプロイの設定 {#deployment-configurations}

`projectName`、`organizationName`、任意で`deploymentBranch`などのデプロイ設定は、`deploy`コマンドでサイトをデプロイするときに使用されます。

詳しくは、[デプロイのドキュメント](deployment.mdx)を参照することをお勧めします。

### テーマ・プラグイン・プリセット設定 {#theme-plugin-and-preset-configurations}

`themes`、`plugins`、`presets` の欄に、それぞれ自分のサイトの[テーマ](./using-plugins.mdx#using-themes)、[プラグイン](./using-plugins.mdx)、[プリセット](./using-plugins.mdx#using-presets)を記載します。 これらは通常、以下に示す通りnpmパッケージです。

```js title="docusaurus.config.js"
export default {
  // ...
  plugins: [
    '@docusaurus/plugin-content-blog',
    '@docusaurus/plugin-content-pages',
  ],
  themes: ['@docusaurus/theme-classic'],
};
```

:::tip

Docusaurusは[**モジュールの短縮表記**](./using-plugins.mdx#module-shorthands)をサポートしているので、上記の設定を次のように簡略化することができます。

```js title="docusaurus.config.js"
export default {
  // ...
  plugins: ['content-blog', 'content-pages'],
  themes: ['classic'],
};
```

:::

また、次のようにローカルディレクトリから読み込むことも可能です

```js title="docusaurus.config.js"
import path from 'path';

export default {
  // ...
  themes: [path.resolve(__dirname, '/path/to/docusaurus-local-theme')],
};
```

プラグインやテーマのオプションを指定するには、次のように、設定ファイルのプラグインやテーマの名前を、その名前とオプションオブジェクトを含む配列に置き換えます。

```js title="docusaurus.config.js"
export default {
  // ...
  plugins: [
    [
      'content-blog',
      {
        path: 'blog',
        routeBasePath: 'blog',
        include: ['*.md', '*.mdx'],
        // ...
      },
    ],
    'content-pages',
  ],
};
```

プリセットにバンドルされているプラグインやテーマのオプションを指定するには、`presets`欄にオプションを渡します。 この例では、`docs`は`@docusaurus/plugin-content-docs`を指し、`theme`は`@docusaurus/theme-classic`を指します。

```js title="docusaurus.config.js"
export default {
  // ...
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          sidebarPath: './sidebars.js',
        },
        theme: {
          customCss: ['./src/css/custom.css'],
        },
      },
    ],
  ],
};
```

:::tip

短縮形`presets: [['classic', {...}]]`も同様に機能します。

:::

テーマ、プラグイン、プリセットの設定の詳細については、[プラグインの使用](./using-plugins.mdx)を参照してください。

### カスタム設定 {#custom-configurations}

Docusaurus guards `docusaurus.config.js` from unknown fields. カスタムフィールドを追加するには、`customFields`で定義してください。

例：

```js title="docusaurus.config.js"
export default {
  // ...
  // highlight-start
  customFields: {
    image: '',
    keywords: [],
  },
  // highlight-end
  // ...
};
```

## コンポーネントから設定にアクセス {#accessing-configuration-from-components}

設定オブジェクトは、サイトのすべてのコンポーネントで利用できるようになります。 そして、Reactコンテキストから`siteConfig`としてアクセスすることができます。

簡単な例：

```jsx
import React from 'react';
// highlight-next-line
import useDocusaurusContext from '@docusaurus/useDocusaurusContext';

const Hello = () => {
  // highlight-start
  const {siteConfig} = useDocusaurusContext();
  // highlight-end
  const {title, tagline} = siteConfig;

  return <div>{`${title} · ${tagline}`}</div>;
};
```

:::tip

クライアント側でそれらのフィールドを使いたいだけなら、自分でJSファイルを作ってES6モジュールとしてインポートすればいいので、`docusaurus.config.js`に入れる必要はありません。

:::

## Babelの設定のカスタマイズ {#customizing-babel-configuration}

Docusaurus transpiles your site's source code using Babel by default. If you want to customize the Babel configuration, you can do so by creating a `babel.config.js` file in your project root.

To use the built-in preset as a base configuration, install the following package and use it

```bash npm2yarn
npm install --save @docusaurus/babel
```

Then use the preset in your `babel.config.js` file:

```js title="babel.config.js"
export default {
  presets: ['@docusaurus/babel/preset'],
};
```

Most of the time, the default preset configuration will work just fine. Babelの設定をカスタマイズしたい場合（例：Flowのサポートを追加するなど）、このファイルを直接編集することができます。 変更を有効にするには、Docusaurusの開発サーバーを再起動する必要があります。
