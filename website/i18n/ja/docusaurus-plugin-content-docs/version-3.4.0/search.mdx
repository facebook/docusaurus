---
keywords:
  - algolia
  - æ¤œç´¢
---

# æ¤œç´¢

ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«æ¤œç´¢æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€ã„ãã¤ã‹ã®é¸æŠè‚¢ãŒåˆ©ç”¨ã§ãã¾ã™ã€‚

- ğŸ¥‡ [Algolia DocSearch](#using-algolia-docsearch) (**official**)
- ğŸ‘¥ [Typesense DocSearch](#using-typesense-docsearch)
- ğŸ‘¥ [Local Search](#using-local-search)
- ğŸ‘¥ [Your own `SearchBar` component](#using-your-own-search)

:::info

ğŸ¥‡ Docusaurus provides **first-class support** for [Algolia DocSearch](#using-algolia-docsearch).

ğŸ‘¥ Other options are **maintained by the community**: please report bugs to their respective repositories.

:::

## ğŸ¥‡ Using Algolia DocSearch {#using-algolia-docsearch}

Docusaurus has **official support** for [Algolia DocSearch](https://docsearch.algolia.com).

The service is **free** for any developer documentation or technical blog: just make sure to read the [checklist](https://docsearch.algolia.com/docs/who-can-apply/) and [apply to the DocSearch program](https://docsearch.algolia.com/apply).

DocSearchã¯ã‚ãªãŸã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’é€±ã«ä¸€åº¦å·¡å›(ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã‚¦ã‚§ãƒ–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‹ã‚‰è¨­å®šå¯èƒ½) ã—ã€ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’Algoliaã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«é›†ç´„ã—ã¾ã™ã€‚ ã“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ã€Algolia APIã‚’ä½¿ç”¨ã—ã¦ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ç›´æ¥ç…§ä¼šã•ã‚Œã¾ã™ã€‚

If your website is [not eligible](https://docsearch.algolia.com/docs/who-can-apply) for the free, hosted version of DocSearch, or if your website sits behind a firewall and is not public, then you can [run your own](https://docsearch.algolia.com/docs/run-your-own/) DocSearch crawler.

:::note

By default, the Docusaurus preset generates a [sitemap.xml](https://docusaurus.io/sitemap.xml) that the Algolia crawler can use.

:::

:::info From the old docsearch?

You can read more about migration from the legacy DocSearch infra in [our blog post](/blog/2021/11/21/algolia-docsearch-migration) or [the DocSearch migration docs](https://docsearch.algolia.com/docs/migrating-from-legacy).

:::

### Index Configuration {#algolia-index-configuration}

ã‚ãªãŸã®ç”³è«‹ãŒæ‰¿èªã•ã‚Œã€ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ã¨ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«DocSearchã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã®è©³ç´°æƒ…å ±ãŒè¨˜è¼‰ã•ã‚ŒãŸãƒ¡ãƒ¼ãƒ«ãŒå±Šãã¾ã™ã€‚ Editing and managing your crawls can be done via [the web interface](https://crawler.algolia.com/). ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã™ãã«åˆ©ç”¨å¯èƒ½ãªã®ã§ã€æ‰‹å‹•ã§ã®è¨­å®šã¯é€šå¸¸å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚

:::danger Use the recommended crawler config

It is highly recommended to use our official [**Docusaurus v3 crawler configuration**](https://docsearch.algolia.com/docs/templates/#docusaurus-v3-template). åˆ¥ã®ã‚¯ãƒ­ãƒ¼ãƒ©ãƒ¼è¨­å®šã‚’é¸æŠã—ãŸå ´åˆã€ã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã§ãã¾ã›ã‚“ã€‚

:::

:::warning When updating your crawler config

The crawler configuration contains a `initialIndexSettings`, which will only be used to initialize your Algolia index if it does not exist yet.

If you update your `initialIndexSettings` crawler setting, it is possible to update the index manually through the interface, but [the Algolia team recommends to delete your index and then restart a crawl](https://github.com/facebook/docusaurus/issues/9200#issuecomment-1667338492) to fully reinitialize it with the new settings.

:::

### Connecting Algolia {#connecting-algolia}

Docusaurus' own `@docusaurus/preset-classic` supports Algolia DocSearch integration. classicãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€è¿½åŠ ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ä¸è¦ã§ã™ã€‚

<details>
<summary>Installation steps when not using <code>@docusaurus/preset-classic</code></summary>

1. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹:

```bash npm2yarn
npm install --save @docusaurus/theme-search-algolia
```

2. Register the theme in `docusaurus.config.js`:

```js title="docusaurus.config.js"
export default {
  title: 'My site',
  // ...
  themes: ['@docusaurus/theme-search-algolia'],
  themeConfig: {
    // ...
  },
};
```

</details>

Then, add an `algolia` field in your `themeConfig`. **[Apply for DocSearch](https://docsearch.algolia.com/apply/)** to get your Algolia index and API key.

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      // The application ID provided by Algolia
      appId: 'YOUR_APP_ID',

      // Public API key: it is safe to commit it
      apiKey: 'YOUR_SEARCH_API_KEY',

      indexName: 'YOUR_INDEX_NAME',

      // Optional: see doc section below
      contextualSearch: true,

      // Optional: Specify domains where the navigation should occur through window.location instead on history.push. Useful when our Algolia config crawls multiple documentation sites and we want to navigate with window.location.href to them.
      externalUrlRegex: 'external\\.com|domain\\.com',

      // Optional: Replace parts of the item URLs from Algolia. Useful when using the same search index for multiple deployments using a different baseUrl. You can use regexp or string in the `from` param. For example: localhost:3000 vs myCompany.com/docs
      replaceSearchResultPathname: {
        from: '/docs/', // or as RegExp: /\/docs\//
        to: '/',
      },

      // Optional: Algolia search parameters
      searchParameters: {},

      // Optional: path for search page that enabled by default (`false` to disable it)
      searchPagePath: 'search',

      // Optional: whether the insights feature is enabled or not on Docsearch (`false` by default)
      insights: false,

      //... other Algolia params
    },
    // highlight-end
  },
};
```

:::info

The `searchParameters` option used to be named `algoliaOptions` in Docusaurus v1.

Refer to its [official DocSearch documentation](https://docsearch.algolia.com/docs/api#searchparameters) for possible values.

:::

:::warning

AlgoliaãŒã‚µã‚¤ãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ«ã™ã‚‹ã¾ã§ã€æ¤œç´¢æ©Ÿèƒ½ã¯æ©Ÿèƒ½ã—ã¾ã›ã‚“ã€‚

If search doesn't work after any significant change, please use the Algolia dashboard to **trigger a new crawl**.

:::

### Contextual search {#contextual-search}

Contextual search is **enabled by default**.

It ensures that search results are **relevant to the current language and version**.

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: true,
    },
    // highlight-end
  },
};
```

Let's consider you have 2 docs versions (**v1** and **v2**) and 2 languages (`en` and `fr`).

v2ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é–²è¦§ã—ã¦ã„ã‚‹ã¨ãã«ã€v1ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ¤œç´¢çµæœãŒè¿”ã•ã‚Œã‚‹ã®ã¯ãŠã‹ã—ã„ã§ã™ã€‚ æ™‚ã«ã¯v1ã¨v2ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒéå¸¸ã«ä¼¼ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‚Šã€åŒã˜ã‚¯ã‚¨ãƒªã«å¯¾ã—ã¦é‡è¤‡ã™ã‚‹æ¤œç´¢çµæœï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã”ã¨ã«1ã¤ã®çµæœï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

åŒæ§˜ã«ã€ãƒ•ãƒ©ãƒ³ã‚¹èªã®ã‚µã‚¤ãƒˆã‚’é–²è¦§ã—ã¦ã„ã‚‹ã¨ãã«ã€è‹±èªã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ¤œç´¢çµæœãŒè¿”ã•ã‚Œã‚‹ã®ã¯ãŠã‹ã—ã„ã§ã™ã€‚

ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã€æ–‡è„ˆæ¤œç´¢æ©Ÿèƒ½ã¯ã€ç‰¹å®šã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨è¨€èªã‚’é–²è¦§ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç†è§£ã—ã€æ¤œç´¢ã‚¯ã‚¨ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’å‹•çš„ã«ä½œæˆã—ã¾ã™ã€‚

- on `/en/docs/v1/myDoc`, search results will only include **English** results for the **v1** docs (+ other unversioned pages)
- on `/fr/docs/v2/myDoc`, search results will only include **French** results for the **v2** docs (+ other unversioned pages)

:::info

When using `contextualSearch: true` (default), the contextual facet filters will be merged with the ones provided with `algolia.searchParameters.facetFilters` .

For specific needs, you can disable `contextualSearch` and define your own `facetFilters`:

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: false,
      searchParameters: {
        facetFilters: ['language:en', ['filter1', 'filter2'], 'filter3'],
      },
    },
    // highlight-end
  },
};
```

Refer to the relevant [Algolia faceting documentation](https://www.algolia.com/doc/guides/managing-results/refine-results/faceting/).

:::

:::warning Contextual search doesn't work?

If you only get search results when Contextual Search is disabled, this is very likely because of an [index configuration issue](#algolia-no-search-results).

:::

### Styling your Algolia search {#styling-your-algolia-search}

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€DocSearchã«ã¯ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚ã«å¾®èª¿æ•´ã•ã‚ŒãŸãƒ†ãƒ¼ãƒãŒä»˜å±ã—ã¦ãŠã‚Šã€è‰²ã¨ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãŒåŸºæº–ã‚’éµå®ˆã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ã„ã¾ã™ã€‚

Still, you can reuse the [Infima CSS variables](styling-layout.mdx#styling-your-site-with-infima) from Docusaurus to style DocSearch by editing the `/src/css/custom.css` file.

```css title="/src/css/custom.css"
[data-theme='light'] .DocSearch {
  /* --docsearch-primary-color: var(--ifm-color-primary); */
  /* --docsearch-text-color: var(--ifm-font-color-base); */
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(94, 100, 112, 0.7);
  /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
  --docsearch-modal-background: var(--ifm-color-secondary-lighter);
  /* æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ */
  --docsearch-searchbox-background: var(--ifm-color-secondary);
  --docsearch-searchbox-focus-background: var(--ifm-color-white);
  /* ãƒ’ãƒƒãƒˆ */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-white);
  /* ãƒ•ãƒƒã‚¿ */
  --docsearch-footer-background: var(--ifm-color-white);
}

[data-theme='dark'] .DocSearch {
  --docsearch-text-color: var(--ifm-font-color-base);
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(47, 55, 69, 0.7);
  /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
  --docsearch-modal-background: var(--ifm-background-color);
  /* æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ */
  --docsearch-searchbox-background: var(--ifm-background-color);
  --docsearch-searchbox-focus-background: var(--ifm-color-black);
  /* ãƒ’ãƒƒãƒˆ */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-emphasis-100);
  /* ãƒ•ãƒƒã‚¿ */
  --docsearch-footer-background: var(--ifm-background-surface-color);
  --docsearch-key-gradient: linear-gradient(
    -26.5deg,
    var(--ifm-color-emphasis-200) 0%,
    var(--ifm-color-emphasis-100) 100%
  );
}
```

### Customizing the Algolia search behavior {#customizing-the-algolia-search-behavior}

Algolia DocSearch supports a [list of options](https://docsearch.algolia.com/docs/api/) that you can pass to the `algolia` field in the `docusaurus.config.js` file.

```js title="docusaurus.config.js"
export default {
  themeConfig: {
    // ...
    algolia: {
      apiKey: 'YOUR_API_KEY',
      indexName: 'YOUR_INDEX_NAME',
      // Options...
    },
  },
};
```

### Editing the Algolia search component {#editing-the-algolia-search-component}

If you prefer to edit the Algolia search React component, [swizzle](swizzling.mdx) the `SearchBar` component in `@docusaurus/theme-search-algolia`:

```bash npm2yarn
npm run swizzle @docusaurus/theme-search-algolia SearchBar
```

### Troubleshooting {#algolia-troubleshooting}

Docusaurus ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ Algolia DocSearch ã‚’ä½¿ç”¨ã™ã‚‹éš›ã«é­é‡ã™ã‚‹æœ€ã‚‚ã‚ˆãã‚ã‚‹å•é¡Œã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

#### No Search Results {#algolia-no-search-results}

Seeing no search results is usually related to an **index configuration problem**.

<details>
  <summary>How to check if I have an config problem?</summary>

Docusaurus uses [Algolia faceting](https://www.algolia.com/doc/guides/managing-results/refine-results/faceting/) for its [Contextual Search](#contextual-search) feature, to create dynamic queries such as:

```json
[
  "language:en",
  [
    "docusaurus_tag:default",
    "docusaurus_tag:docs-default-3.2.1",
    "docusaurus_tag:docs-community-current",
    "docusaurus_tag:docs-docs-tests-current"
  ]
]
```

On the Algolia UI, your index should allow to create facet queries on fields `docusaurus_tag`, `language`, `lang`, `version`, `type`, as shown in the screenshot below:

![Algolia index showing appropriate faceting fields](/img/docsearch-troubleshoot-index-facets.jpg)

Alternatively, if you disable [Contextual Search](#contextual-search) with `{contextualSearch: false}` (which we don't particularly recommend), Docusaurus will not use facet queries, and you should start seeing results.

</details>

:::danger Use the recommended configuration

We [recommend a specific crawler configuration](#algolia-index-configuration) for a good reason. We cannot support you if you choose to use a different configuration.

:::

You can fix index configuration problems by following those steps:

1. Use the [recommend crawler configuration](#algolia-index-configuration)
2. Delete your index through the UI
3. Trigger a new crawl through the UI
4. Check your index is recreated with the appropriate faceting fields: `docusaurus_tag`, `language`, `lang`, `version`, `type`
5. See that you now get search results, even with [Contextual Search](#contextual-search) enabled

### Support {#algolia-support}

The Algolia DocSearch team can help you figure out search problems on your site.

You can reach out to Algolia via [their support page](https://algolia.com/support) or on [Discord](https://discord.gg/wr2m5j948P).

Docusaurus also has an `#algolia` channel on [Discord](https://discordapp.com/invite/docusaurus).

## ğŸ‘¥ Using Typesense DocSearch {#using-typesense-docsearch}

[Typesense](https://typesense.org) DocSearch works similar to Algolia DocSearch, except that your website is indexed into a Typesense search cluster.

Typesense is an [open source](https://github.com/typesense/typesense) instant-search engine that you can either:

- [Self-Host](https://typesense.org/docs/guide/install-typesense.html#option-2-local-machine-self-hosting) on your own servers or
- Use the Managed [Typesense Cloud](https://cloud.typesense.org) service.

Similar to Algolia DocSearch, there are two components:

- [typesense-docsearch-scraper](https://github.com/typesense/typesense-docsearch-scraper) - which scrapes your website and indexes the data in your Typesense cluster.
- [docusaurus-theme-search-typesense](https://github.com/typesense/docusaurus-theme-search-typesense) - a search bar UI component to add to your website.

Read a step-by-step walk-through of how to [run typesense-docsearch-scraper here](https://typesense.org/docs/guide/docsearch.html#step-1-set-up-docsearch-scraper) and how to [install the Search Bar in your Docusaurus Site here](https://typesense.org/docs/guide/docsearch.html#option-a-docusaurus-powered-sites).

## ğŸ‘¥ Using Local Search {#using-local-search}

æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒå°ã•ãã€ãƒ¦ãƒ¼ã‚¶ãŒã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã¨ãã«ãƒ–ãƒ©ã‚¦ã‚¶ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã›ã‚‰ã‚Œã‚‹ã‚ˆã†ãªã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«å¯¾ã—ã¦ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«æ¤œç´¢ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

You'll find a list of community-supported [local search plugins listed here](https://docusaurus.io/community/resources#search).

## ğŸ‘¥ Using your own search {#using-your-own-search}

To use your own search, swizzle the `SearchBar` component in `@docusaurus/theme-classic`

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic SearchBar
```

This will create an `src/theme/SearchBar` file in your project folder. Restart your dev server and edit the component, you will see that Docusaurus uses your own `SearchBar` component now.

**Notes**: You can alternatively [swizzle from Algolia SearchBar](#editing-the-algolia-search-component) and create your own search component from there.
