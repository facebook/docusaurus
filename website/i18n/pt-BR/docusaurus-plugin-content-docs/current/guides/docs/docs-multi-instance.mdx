---
id: multi-instance
description: Use várias instâncias de plugins de docs em um único site Docusaurus.
slug: /docs-multi-instance
---

# Multi-instância da Docs

The `@docusaurus/plugin-content-docs` plugin can support [multi-instance](../../using-plugins.mdx#multi-instance-plugins-and-plugin-ids).

:::note

This feature is only useful for [versioned documentation](./versioning.mdx). É recomendável estar familiarizado com o versionamento de documentos antes de ler esta página. If you just want [multiple sidebars](./sidebar/multiple-sidebars.mdx), you can do so within one plugin.

:::

## Casos de uso {#use-cases}

Às vezes você quer um site Docusaurus para hospedar 2 conjuntos distintos de documentação (ou mais).

Estas documentações podem até ter diferentes ciclos de versão/liberação.

### Documentação do Mobile SDKs {#mobile-sdks-documentation}

Se você criar um SDK móvel multiplataforma, você pode ter 2 documentações:

- Documentação do Android SDK (`v1.0`, `v1.1`)
- documentação do iOS SDK (`v1.0`, `v2.0`)

In this case, you can use a distinct docs plugin instance per mobile SDK documentation.

:::warning

Se cada instância de documentação for muito grande, você prefere criar 2 sites do Docusaurus distintos.

Se alguém editar a documentação do iOS, é realmente útil reconstruir tudo, incluindo toda a documentação do Android que não mudou?

:::

### Documento versionado e não versionado {#versioned-and-unversioned-doc}

Às vezes, você quer que alguns documentos sejam versionados, enquanto outros documentos são mais "globais" e parece inútil versioná-los.

Usamos esse padrão no próprio site do Docusaurus:

- A seção [/docs/\*](/docs) está versionada
- A seção [/community/\*](/community/support) não está versionada

## Configuração {#setup}

Suponha que você tem 2 documentações:

- Produto: algum documento versionado sobre seu produto
- Comunidade: algum documento não versionado sobre a comunidade em torno do seu produto

Neste caso, você deve usar o mesmo plugin duas vezes na configuração do seu site.

:::warning

`@docusaurus/preset-classic` já inclui uma instância do plugin de docs para você!

:::

Ao usar a predefinição:

```js title="docusaurus.config.js"
export default {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          // highlight-start
          // id: 'product', // omitted => default instance
          // highlight-end
          path: 'product',
          routeBasePath: 'product',
          sidebarPath: './sidebarsProduct.js',
          // ... other options
        },
      },
    ],
  ],
  plugins: [
    [
      '@docusaurus/plugin-content-docs',
      {
        // highlight-start
        id: 'community',
        // highlight-end
        path: 'community',
        routeBasePath: 'community',
        sidebarPath: './sidebarsCommunity.js',
        // ... other options
      },
    ],
  ],
};
```

Quando não estiver usando a predefinição:

```js title="docusaurus.config.js"
export default {
  plugins: [
    [
      '@docusaurus/plugin-content-docs',
      {
        // highlight-start
        // id: 'product', // omitted => default instance
        // highlight-end
        path: 'product',
        routeBasePath: 'product',
        sidebarPath: './sidebarsProduct.js',
        // ... other options
      },
    ],
    [
      '@docusaurus/plugin-content-docs',
      {
        // highlight-start
        id: 'community',
        // highlight-end
        path: 'community',
        routeBasePath: 'community',
        sidebarPath: './sidebarsCommunity.js',
        // ... other options
      },
    ],
  ],
};
```

Não se esqueça de atribuir um atributo `id` exclusivo para instâncias de plugins.

:::note

We consider that the `product` instance is the most important one, and make it the "default" instance by not assigning any ID.

:::

## Caminhos versionados {#versioned-paths}

Cada instância do plugin armazenará documentos versionados em uma pasta distinta.

A instância padrão do plugin usará esses caminhos:

- `website/versions.json`
- `website/versioned_docs`
- `website/versioned_sidebars`

As outras instâncias de plugin (com um atributo `id`) usarão esses caminhos:

- `website/[pluginId]_versions.json`
- `website/[pluginId]_versioned_docs`
- `website/[pluginId]_versioned_sidebars`

:::tip

Você pode omitir o atributo `id` (o padrão é `default`) para uma das instâncias do plugin da documentação.

Os caminhos da instância serão mais simples e compatíveis com uma configuração de uma única instância.

:::

## Marcando novas versões {#tagging-new-versions}

Each plugin instance will have its own CLI command to tag a new version. Eles serão exibidos se você executar:

```bash npm2yarn
npm run docusaurus -- --help
```

Para criar a versão da instância do plug-in do produto/documentos padrão:

```bash npm2yarn
npm run docusaurus docs:version 1.0.0
```

Para versão a instância do plugin não-padrão/comunitária:

```bash npm2yarn
npm run docusaurus docs:version:community 1.0.0
```

## Itens da barra de navegação dos documentos {#docs-navbar-items}

Each docs-related [theme navbar items](../../api/themes/theme-configuration.mdx#navbar) take an optional `docsPluginId` attribute.

Por exemplo, se você quiser ter uma lista suspensa de versão para cada SDK móvel (iOS e Android), você pode fazer:

```js title="docusaurus.config.js"
export default {
  themeConfig: {
    navbar: {
      items: [
        {
          type: 'docsVersionDropdown',
          // highlight-start
          docsPluginId: 'ios',
          // highlight-end
        },
        {
          type: 'docsVersionDropdown',
          // highlight-start
          docsPluginId: 'android',
          // highlight-end
        },
      ],
    },
  },
};
```
