---
sidebar_position: 4
slug: /api/plugins/@docusaurus/plugin-client-redirects
---

# üì¶ plugin-client-redirects

import APITable from '@site/src/components/APITable';

Plugin Docusaurus pour g√©n√©rer les **redirections c√¥t√© client**.

Ce plugin √©crirera des pages HTML suppl√©mentaires sur votre site statique qui redirige l'utilisateur vers vos pages Docusaurus existantes avec JavaScript.

:::warning seulement en production

Ce plugin est toujours inactif en d√©veloppement et **uniquement actif en production** car il fonctionne sur la sortie de la construction.

:::

:::warning

Il est pr√©f√©rable d'utiliser les redirections c√¥t√© serveur chaque fois que cela est possible.

Avant d'utiliser ce plugin, vous devez v√©rifier si votre fournisseur d'h√©bergement n'offre pas cette fonctionnalit√©.

:::

## Installation {#installation}

```bash npm2yarn
npm install --save @docusaurus/plugin-client-redirects
```

## Configuration {#configuration}

Champs accept√©s¬†:

```mdx-code-block
<APITable>
```

| Option            | Type                                                 | Par d√©faut  | Description                                                                                                                                                                       |
| ----------------- | ---------------------------------------------------- | ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `fromExtensions`  | `string[]`                                           | `[]`        | Les extensions √† retirer de la route apr√®s redirection.                                                                                                                           |
| `toExtensions`    | `string[]`                                           | `[]`        | Les extensions √† ajouter √† la route apr√®s redirection.                                                                                                                            |
| `redirects`       | <code>[RedirectRule](#RedirectRule)[]</code>         | `[]`        | La liste des r√®gles de redirection.                                                                                                                                               |
| `createRedirects` | <code>[CreateRedirectsFn](#CreateRedirectsFn)</code> | `undefined` | Un callback pour cr√©er une r√®gle de redirection. Docusaurus interroge ce callback pour chaque chemin qu'il a cr√©√©, et utilise sa valeur de retour pour produire d'autres chemins. |

```mdx-code-block
</APITable>
```

:::note

Ce plugin lira √©galement la configuration [`siteConfig.onDuplicateRoutes`](../docusaurus.config.js.mdx#onDuplicateRoutes) pour configurer son niveau de journalisation lorsque plusieurs fichiers seront √©mis au m√™me endroit.

:::

### Types {#types}

#### `RedirectRule` {#RedirectRule}

```ts
type RedirectRule = {
  to: string;
  from: string | string[];
};
```

:::note

L'id√©e de "from" et "to" est primordiale dans ce plugin. "From" signifie un chemin que vous voulez _cr√©er_, c'est-√†-dire un fichier HTML suppl√©mentaire qui sera cr√©√©, "To" signifie un chemin _vers_ lequel vous voulez rediriger, g√©n√©ralement une route que Docusaurus conna√Æt d√©j√†.

C'est pourquoi vous pouvez avoir plusieurs "from" pour le m√™me "to"¬†: nous allons cr√©er plusieurs fichiers HTML qui redirigent tous vers la m√™me destination. A l'inverse, un "from" ne peut jamais avoir plus d'un "to"¬†: le fichier HTML √©crit doit avoir une destination d√©termin√©e.

:::

#### `CreateRedirectsFn` {#CreateRedirectsFn}

```ts
// Le param√®tre `path` est une route que Docusaurus a d√©j√† cr√©√©e. Il peut
// √™tre consid√©r√© comme le "to", et votre valeur de retour est le "from". Retourner une valeur falsy
// ne cr√©era aucune page de redirection pour ce chemin particulier.
type CreateRedirectsFn = (path: string) => string[] | string | null | undefined;
```

### Exemple de configuration {#ex-config}

Voici un exemple de configuration¬†:

```js title="docusaurus.config.js"
module.exports = {
  plugins: [
    [
      '@docusaurus/plugin-client-redirects',
      // highlight-start
      {
        fromExtensions: ['html', 'htm'], // /myPage.html -> /myPage
        toExtensions: ['exe', 'zip'], // /myAsset -> /myAsset.zip (if latter exists)
        redirects: [
          // /docs/oldDoc -> /docs/newDoc
          {
            to: '/docs/newDoc',
            from: '/docs/oldDoc',
          },
          // Redirection depuis plusieurs anciens chemins vers le nouveau chemin
          {
            to: '/docs/newDoc2',
            from: ['/docs/oldDocFrom2019', '/docs/legacyDocFrom2016'],
          },
        ],
        createRedirects(existingPath) {
          if (existingPath.includes('/community')) {
            // Redirection de /docs/team/X vers /community/X et /docs/support/X vers /community/X
            return [
              existingPath.replace('/community', '/docs/team'),
              existingPath.replace('/community', '/docs/support'),
            ];
          }
          return undefined; // Renvoie une valeur fausse¬†: pas de redirection cr√©√©e
        },
      },
      // highlight-end
    ],
  ],
};
```
