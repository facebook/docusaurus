---
title: Docusaurus 2.4
authors:
  - slorber
tags:
  - version
image: ./img/social-card.png
date: 2023-03-23
---

Nous sommes heureux d'annoncer **Docusaurus 2.4**.

La mise √† jour devrait √™tre facile : comme expliqu√© dans notre [documentation du processus de publication](/community/release-process), les versions mineures respectent [le versionnage s√©mantique](https://semver.org/).

![Carte sociale d'article de blog de Docusaurus](./img/social-card.png)

<!--truncate-->

import BrowserWindow from '@site/src/components/BrowserWindow';
import IframeWindow from '@site/src/components/BrowserWindow/IframeWindow';
import ErrorBoundaryTestButton from '@site/src/components/ErrorBoundaryTestButton';

## Points importants

### Description des √©l√©ments de la barre lat√©rale

Dans [#8236](https://github.com/facebook/docusaurus/pull/8236), nous avons ajout√© la possibilit√© de fournir un nouvel attribut `description` pour les √©l√©ments de type `link` et `category` de la barre lat√©rale de la documentation.

```tsx title="sidebars.js"
[
  {
    type: 'link',
    label: 'Lien avec description',
    href: 'https://docusaurus.io',
    // highlight-next-line
    description: 'Une descriptions pour le lien',
  },
  {
    type: 'category',
    label: 'Cat√©gorie avec description',
    // highlight-next-line
    description: 'Une description de la cat√©gorie',
    objets : [],
  },
];
```

Ces descriptions seront utilis√©es dans les pages d'index g√©n√©r√©es pour les cat√©gories.

![Montre l'index des cat√©gories g√©n√©r√© pour la barre lat√©rale avec des descriptions personnalis√©es](./img/sidebar-item-description.jpg)

### Cha√Æne de requ√™te du th√®me

Dans [#8708](https://github.com/facebook/docusaurus/pull/8708), nous avons ajout√© la possibilit√© de forcer Docusaurus √† s'initialiser en mode `light` (clair) ou `dark` (sombre) gr√¢ce √† un nouveau param√®tre `docusaurus-theme` de la cha√Æne de requ√™te.

Ceci est utile pour assurer un th√®me coh√©rent lors de l'int√©gration d'une page Docusaurus existante dans une iframe ou WebView.

<IframeWindow url="/docs/?docusaurus-theme=light" />
<IframeWindow url="/docs/?docusaurus-theme=dark" />

### Mise √† jour du plugin Remark-plugin-npm2yarn

Dans [#8690](https://github.com/facebook/docusaurus/pull/8690), nous avons mis √† jour notre plugin Remark [@docusaurus/remark-plugin-npm2yarn](https://github.com/facebook/docusaurus/tree/main/packages/docusaurus-remark-plugin-npm2yarn) avec de nombreuses corrections de bugs de conversion, un support de premi√®re classe pour pnpm, et la possibilit√© d'enregistrer des convertisseurs personnalis√©s produisant de nouveaux onglets.

````markdown
Run these commands!

```bash npm2yarn
npm install
npm run build
npm run myCustomScript -- --some-arg
```
````

<BrowserWindow>

```bash npm2yarn
npm install
npm run build
npm run myCustomScript -- --some-arg
```

</BrowserWindow>

### Prise en charge de gtag pour plusieurs ID de suivi

Dans [#8620](https://github.com/facebook/docusaurus/pull/8620) nous avons ajout√© le support du plugin [@docusaurus/plugin-google-gtag](/docs/api/plugins/@docusaurus/plugin-google-gtag) pour d√©clarer plusieurs ID de suivi.

```js title="docusaurus.config.js"
module.exports = {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        gtag: {
          trackingID: [
            // highlight-next-line
            'G-<YOUR-NEW-GA4-ID>',
            // highlight-next-line
            'UA-<YOUR-OLD-UA-ID>',
          ],
        },
      },
    ],
  ],
};
```

:::warning Google met progressivement fin √† Universal Analytics

**[Google mettra fin √† Universal Analytics](https://blog.google/products/marketingplatform/analytics/prepare-for-future-with-google-analytics-4/)** le **1·µâ ≥ juillet 2023**.

Les utilisateurs de Docusaurus devraient par cons√©quent migrer vers Google Analytics 4. Google **ne permet pas de migrer vos donn√©es Universal Analytics existantes** vers votre nouveau domaine Google Analytics 4.

Pour pr√©server la continuit√© de vos statistiques, nous vous recommandons temporairement de rapporter les √©v√©nements √† deux identifiants de suivi simultan√©ment : l'ancien (`UA-*`) et le nouveau (`G-*`). Reportez-vous au **[probl√®me d√©di√©](https://github.com/facebook/docusaurus/issues/7221)** pour plus de d√©tails.

:::

### Exp√©rience de d√©veloppeur

Dans [#8736](https://github.com/facebook/docusaurus/pull/8736), nous avons am√©lior√© la fa√ßon dont les messages d'erreur sont rendus et ajout√© le support initial pour le rendu de la cha√Æne causale compl√®te d'une erreur (voir [ES2022 Error Cause](https://h3manth.com/ES2022/#error-cause)).

:::tip

Pour le voir en action, cliquez ici : <ErrorBoundaryTestButton cause="Probably undefined is not a function üòÑ"/>

:::

Dans [#8735](https://github.com/facebook/docusaurus/pull/8735), nous avons √©galement clarifi√© les messages d'erreur li√©s √† la barre de navigation pour aider les utilisateurs √† comprendre ce qu'ils ont fait de mal.

![Capture d'√©cran de message d'erreur de la barre de navigation de Docusaurus](./img/navbar-error.jpg)

### Traductions

Nous avons rendu possible la traduction de quelques nouveaux √©l√©ments :

- [#8677](https://github.com/facebook/docusaurus/pull/8677) introduit un nouveau `process.env.DOCUSAURUS_CURRENT_LOCALE` (exp√©rimental) vous permettant de localiser votre fichier de configuration, y compris le titre du site, le slogan, la barre d'annonce, baseUrl...
- [#8616](https://github.com/facebook/docusaurus/pull/8616) permet de traduire le texte alternatif de la barre de navigation et du logo du pied de page

Nous avons ajout√© la prise en charge de la traduction du th√®me par d√©faut pour plusieurs langues :

- üá≠üá∫ [#8668](https://github.com/facebook/docusaurus/pull/8668): Hongrois
- üá≥üá¥ [#8631](https://github.com/facebook/docusaurus/pull/8631): Norv√©gien (Bokm√•l)

:::tip

Terminer les traductions du th√®me est un [effort en cours](https://github.com/facebook/docusaurus/issues/3526) et un moyen facile de contribuer √† Docusaurus. Nous ajoutons r√©guli√®rement de nouvelles fonctionnalit√©s de th√®me, pour lesquelles nous avons souvent [besoin de nouvelles traductions](https://github.com/facebook/docusaurus/issues/3526).

:::

## Autres modifications

Voici les autres changements notables :

- [#8674](https://github.com/facebook/docusaurus/pull/8674) : respect de la requ√™te m√©dia `prefers-reduced-motion: reduce`
- [#8712](https://github.com/facebook/docusaurus/pull/8712) : utilisation d'un √©l√©ment de la barre de navigation de type `docSidebar` dans le mod√®le
- [#8801](https://github.com/facebook/docusaurus/pull/8801) : permettre aux onglets enfants d'√™tre faux
- [#8757](https://github.com/facebook/docusaurus/pull/8757) : faire que la page de recherche r√©agisse aux changements externes de cha√Æne de recherche
- [#8803](https://github.com/facebook/docusaurus/pull/8803) : correction de la position des boutons du bloc de code en D√†G
- [#8615](https://github.com/facebook/docusaurus/pull/8615) : correction de la bascule du mode couleur lorsque la barre de navigation sombre est utilis√©e
- [#8699](https://github.com/facebook/docusaurus/pull/8699) : correction d'un bug de focalisation de l'onglet d√©roulant de la barre de navigation

Consultez **[l'entr√©e 2.4.0 du journal des modifications](/changelog/2.4.0)** pour une liste exhaustive des changements.
