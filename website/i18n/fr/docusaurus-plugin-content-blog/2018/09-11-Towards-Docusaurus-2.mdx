---
title: En route vers Docusaurus 2
authors: endiliey
tags:
  - nouveau
  - adoption
---

Docusaurus was [officially announced](https://v1.docusaurus.io/blog/2017/12/14/introducing-docusaurus) over nine months ago as a way to easily build open source documentation websites. Since then, it has amassed over 8,600 GitHub Stars, and is used by many popular open source projects such as [React Native](https://facebook.github.io/react-native/), [Babel](https://babeljs.io/), [Jest](https://jestjs.io/), [Reason](https://reasonml.github.io/) and [Prettier](https://prettier.io/).

Il existe un dicton selon lequel le meilleur logiciel est en constante √©volution, et le pire ne l'est pas. Si vous ne le savez pas, nous avons planifi√© et travaill√© sur la prochaine version de Docusaurus üéâ.

<!--truncate-->

## Introduction

It all started with this [RFC issue](https://github.com/facebook/docusaurus/issues/789) opened by [Yangshun](https://github.com/yangshun) towards the end of June 2018.

<blockquote>
  <h4>
    <a href="https://github.com/facebook/docusaurus/issues/789">
      {'[RFC] Docusaurus v2 ¬∑ Issue #789 ¬∑ facebook/docusaurus'}
    </a>
  </h4>
  These are some of the problems I'm seeing in Docusaurus now and also how we can
  address them in v2. Un certain nombre de ces id√©es ont √©t√© inspir√©es par VuePress et d'autres g√©n√©rateurs de sites statiques. Dans l'√©cosyst√®me actuel des g√©n√©rateurs de sites statiques, ...
</blockquote>

La plupart des am√©liorations sugg√©r√©es sont mentionn√©es dans l'issue ; je fournirai des d√©tails sur certains probl√®mes de Docusaurus 1 et sur la fa√ßon dont nous allons les r√©soudre dans Docusaurus 2.

## Infrastructure

### Contenu

Un site web Docusaurus 1 est en fait construit dans un tas de pages HTML statiques. Malgr√© l'utilisation de React, nous n'utilisions pas pleinement les fonctionnalit√©s offertes par React, comme l'√©tat des composants, qui permet de cr√©er des pages dynamiques et interactives. React was only used as a templating engine for static content and interactivity has to be added through script tags and `dangerouslySetInnerHTML` üò±.

En plus de cela, il n'y a pas de moyen facile de modifier la fa√ßon dont Docusaurus charge le contenu. Par exemple, l'ajout de pr√©processeurs CSS tels que Sass et Less n'√©tait pas pris en charge de mani√®re native et impliquait de nombreux bidouillages de la part des utilisateurs pour ajouter des scripts personnalis√©s.

For Docusaurus 2, we will be using [webpack](https://webpack.js.org/) as a module bundler and we are changing the way we serve content. L'ajout de pr√©processeurs CSS sera aussi simple que l'ajout d'un chargeur webpack. Instead of a pure static HTML, **during build time we will create a server-rendered version of the app** and render the corresponding HTML. Un site Docusaurus sera essentiellement une application isomorphique/universelle. This approach is heavily inspired by [Gatsby](https://github.com/gatsbyjs/gatsby).

### Gestion des versions

If you have been using Docusaurus for a while, you might notice that Docusaurus creates versioned docs **if and only if** the docs content are **different**.

For example, if we have `docs/hello.md`:

```text
---
id: hello
title: hello
---
Hello world !
```

And **we cut version 1.0.0,** Docusaurus will create `versioned_docs/version-1.0.0/hello.md`:

```text
---
id: version-1.0.0-hello
title: hello
original_id: hello
---
Hello world !
```

However, if there are no changes to `hello.md` when cutting v2.0.0, Docusaurus will not create any versioned docs for that document. In other words, `versioned_docs/version-2.0.0/hello.md` will not exist.

This can be very confusing for users; if they want to edit the v2.0.0 docs, they have to edit `versioned_docs/version-1.0.0/hello.md` or manually add `versioned_docs/version-2.0.0/hello.md`. Cela pourrait potentiellement conduire √† des bogues non d√©sir√©s. Here is a [real scenario in Jest](https://github.com/facebook/jest/pull/6758#issuecomment-408274413).

En plus, cela ajoute de la complexit√© au sein de la base de code car nous avons besoin d'un m√©canisme de secours de version. Et pendant le temps de compilation, Docusaurus doit remplacer le lien vers la version correcte. This is also the cause of a bug where [renaming docs breaks links in old versions](https://github.com/facebook/docusaurus/issues/845).

For Docusaurus 2, **every time we cut a new version, we will instead take a snapshot of all the docs**. Nous n'exigerons pas que le contenu d'un document ait chang√©. Il s'agit d'un compromis entre la complexit√© et la place occup√©e pour une meilleure exp√©rience du d√©veloppeur et de l'utilisateur. Nous utiliserons plus d'espace pour une meilleure s√©paration des pr√©occupations et une justesse garantie.

### Traduction

Docusaurus allows for easy translation functionality by using [Crowdin](https://crowdin.com/). Les fichiers de documentation √©crits en anglais sont envoy√©s √† Crowdin pour une traduction par les utilisateurs au sein d‚Äôune communaut√©. We always assumed that **English** is the default language, but this might not be the case for all users. Nous avons vu beaucoup de projets open source non-anglais utilisant Docusaurus.

For Docusaurus 2, **we will not assume English is the default language**. When a user enables internationalization, they have to set a default language in `siteConfig.js`. We will then assume that all the files in `docs` are written in that language.

En outre, apr√®s avoir travaill√© sur le MVP de Docusaurus 2, j'ai r√©alis√© qu'il est possible de ne pas utiliser Crowdin pour les traductions. Ainsi, nous pourrions avoir besoin d'ajouter un workflow suppl√©mentaire pour activer ce sc√©nario. Cependant, nous recommanderons toujours fortement aux gens d'utiliser Crowdin pour une int√©gration plus facile.

## Personnalisation

### Mise en page

Dans l'√©tat actuel des choses, Docusaurus est charg√© de l'ensemble de la mise en page et du style, ce qui rend involontairement tr√®s difficile pour les utilisateurs de personnaliser l'apparence de leur site selon leurs souhaits.

For Docusaurus 2, **layout and styling should be controlled by the user**. Docusaurus g√©rera la g√©n√©ration de contenu, le routage, la traduction et la gestion de version. Inspired by [create-react-app](https://github.com/facebook/create-react-app) and [VuePress](https://vuepress.vuejs.org/), Docusaurus will still provide a default theme, which the user can eject from, for further layout and styling customization. This means that it is very possible for the user to even change the HTML meta by using [React Helmet](https://github.com/nfl/react-helmet). Les th√®mes communautaires sont √©galement tout √† fait possibles. Cette approche, qui permet aux utilisateurs de prendre en charge la mise en page et le style, est adopt√©e par la plupart des g√©n√©rateurs de sites statiques.

### Markdown

Our Markdown parsing is currently powered by [Remarkable](https://github.com/jonschlinkert/remarkable). What if the user wants to use [Markdown-it](https://github.com/Markdown-it/Markdown-it) or even [MDX](https://github.com/mdx-js/mdx)? And then there is an issue of which syntax highlighter to use, (e.g: [Prism](https://prismjs.com/) vs [Highlight.js](https://highlightjs.org/)). Nous devrions laisser ces choix ouverts √† l'utilisateur.

For Docusaurus 2, **users can eject and choose their own Markdown parser**. It does not matter if they want to use another Markdown parser such as [Remark](https://github.com/remarkjs/remark), or even their own in-house Markdown parser. As a rule of thumb, the user has to provide a React component, in which we will provide a children props containing the _RAW string of Markdown_. Par d√©faut, nous utiliserons Remarkable pour l'analyseur Markdown et Highlight.js pour la coloration de la syntaxe. L'analyseur par d√©faut pourrait encore changer √† l'avenir, car nous sommes toujours en train d'exp√©rimenter diff√©rents analyseurs de Markdown.

### Recherche

Our core search functionality is based on [Algolia](https://www.algolia.com/). There are requests by users to be able to use different search offerings, such as `lunrjs` for offline search.

J'aime personnellement Algolia et nous avons une grande exp√©rience de travail avec eux. They are very responsive; we can easily submit a pull request to Algolia since their `DocSearch` is open source. For example, I recently submitted [this PR that enables DocSearch to scrape alternate languages in sitemap](https://github.com/algolia/docsearch-scraper/pull/387).

For Docusaurus 2, **we will allow users to customize the search box**. Les utilisateurs doivent simplement se d√©tacher du th√®me par d√©faut et modifier l'interface utilisateur de recherche (un composant React). Cependant, nous utiliserons toujours Algolia dans le th√®me par d√©faut.

## Stabilit√©

Les logiciels ne seront jamais parfaits, mais nous voulons que Docusaurus ne tombe pas en panne lorsque nous ajoutons de nouvelles fonctionnalit√©s. Lorsque Docusaurus a √©t√© publi√© pour la premi√®re fois, il ne disposait pas de suites de tests automatis√©s solides. Par cons√©quent, de nombreuses r√©gressions n'ont pas √©t√© d√©tect√©es √† temps. Bien que nous ayons r√©cemment ajout√© un grand nombre de tests, la couverture des tests est encore relativement faible.

For Docusaurus 2, **we are adding tests as we develop** since we are going for a fresh rewrite. Je pense donc qu'il devrait √™tre plus stable que jamais et qu'il devrait √™tre plus difficile de casser des choses par rapport √† Docusaurus 1.

## Foire aux questions

### Y aura-t-il des changements importants ?

Si vous avez lu l'article jusqu'ici, vous devriez √™tre en mesure de remarquer qu'il y aura des changements importants. While we will try to **minimize the number of breaking changes** and make it backward compatible as much as possible, we believe that some breaking changes are required. This is mostly due to Docusaurus 2 being a **major rewrite and re-architecting** of the codebase.

La liste exacte des changements de rupture n'est pas encore totalement connue car le d√©veloppement n'est pas finalis√© √† 100%. However, one thing that I will highlight is that we will deprecate a lot of options in `siteConfig.js` and we plan to keep it as lean as possible. For example, the `cleanUrl` siteConfig will be deprecated as all the URL for Docusaurus 2 sites will be without the `.html` suffix.

Notre objectif est que la plupart des sites soient en mesure de mettre √† jour Docusaurus 2 sans trop de douleur. Nous inclurons √©galement un guide de migration lorsque nous publierons Docusaurus 2. When the times come, feel free to ping us on [Discord](https://discord.gg/docusaurus) or [X](https://x.com/docusaurus) for questions and help.

### Quand est pr√©vue la sortie de Docusaurus 2 ?

Pour l'instant, nous n'avons pas de date exacte pr√©vue pour la parution. J'estime personnellement que nous pourrions √™tre en mesure de publier une version alpha d'ici un √† deux mois, mais il ne s'agit bien s√ªr que d'une estimation.

One thing that I would like to share is that while Docusaurus is part of [Facebook Open Source](https://opensource.fb.com/) and most of the team are Facebook employees, the maintenance and development work is mostly done outside of normal working hours. I am currently a final year undergraduate student at [NTU Singapore](https://x.com/NTUsg), so I had to juggle between doing my coursework, my final year project and maintaining/developing Docusaurus. Cependant, cela ne veut pas dire que nous ne voulons pas am√©liorer Docusaurus. In fact, **we want to make it as awesome as possible**.

Pour l'instant, le travail actuel de Docusaurus 2 est toujours h√©berg√© dans un d√©p√¥t priv√©. In the near future, we will move them into the [public repository](https://github.com/facebook/docusaurus). Lorsque ce moment arrivera, j'encourage tout le monde √† s'y int√©resser et √† y contribuer d'une mani√®re ou d'une autre. Avant cela, veuillez rester √† l'√©coute üòâ!

## R√©flexions finales

Docusaurus has had a large impact on the open source community as seen from the [many popular projects](https://v1.docusaurus.io/en/users) which use Docusaurus for documentation. Afin d'aller plus vite dans le futur, nous profitons de l'occasion pour corriger certains probl√®mes fondamentaux de Docusaurus 1 et nous nous effor√ßons de rendre Docusaurus meilleur pour tout le monde. En fait, on peut dire que le Docusaurus 2 n'est plus un simple projet ; les travaux ont commenc√© et, esp√©rons-le, nous pourrons le voir se concr√©tiser dans un avenir proche.

La mission de Docusaurus a toujours √©t√© de vous faciliter l'acc√®s √† un site web avec de la documentation. Cette mission ne change pas avec Docusaurus 2.

We also want to let people know that **due to work on Docusaurus 2, we will be less likely to accept new features/major changes on Docusaurus 1.**

Si vous utilisez Docusaurus, vous faites partie de notre communaut√© ; continuez √† nous faire savoir comment nous pouvons am√©liorer Docusaurus pour vous. If you appreciate the work we're doing, you can support [Docusaurus on Open Collective](https://opencollective.com/Docusaurus).

> If you are sponsoring our work on [Open Collective](https://opencollective.com/Docusaurus), we'll personally offer you a helping hand for maintenance and upgrading of Docusaurus website.

Lastly, if you haven't done so already, click the **star** and **watch** button on [GitHub](https://github.com/facebook/docusaurus), and follow us on [X](https://x.com/docusaurus).
