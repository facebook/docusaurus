---
id: code-blocks
description: åœ¨ Docusaurus Markdown ä¸­å¤„ç†ä»£ç å—
slug: /markdown-features/code-blocks
---

# ä»£ç å—

import BrowserWindow from '@site/src/components/BrowserWindow';
import CodeBlock from '@theme/CodeBlock';

æ–‡æ¡£ä¸­çš„ä»£ç å—è¶…çº§å‰å®³ ğŸ’ªã€‚

## ä»£ç æ ‡é¢˜ {#code-title}

ä½ å¯ä»¥åœ¨è¯­è¨€åæ·»åŠ  `title`ï¼ˆè®°å¾—åœ¨è¯­è¨€å’Œ title ä¹‹é—´åŠ ä¸€ä¸ªç©ºæ ¼ï¼‰æ¥è®¾ç½®æ ‡é¢˜ã€‚

````md
```jsx title="/src/components/HelloCodeTitle.js"
function HelloCodeTitle(props) {
  return <h1>ä½ å¥½ï¼Œ{props.name}</h1>;
}
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx title="/src/components/HelloCodeTitle.js"
function HelloCodeTitle(props) {
  return <h1>ä½ å¥½ï¼Œ{props.name}</h1>;
}
```

```mdx-code-block
</BrowserWindow>
```

## è¯­æ³•é«˜äº® {#syntax-highlighting}

ä»£ç å—æ˜¯ä½¿ç”¨ 3 ä¸ªåå¼•å·åŒ…è£¹çš„æ–‡æœ¬å—ã€‚ You may check out [this reference](https://mdxjs.com/docs/) for the specifications of MDX.

````md
```js
console.log('æ¯ä¸ªä»“åº“éƒ½åº”è¯¥æœ‰ä¸ªå‰ç¥¥ç‰©ã€‚');
```
````
åœ¨ä»£ç å—ä¸­ä½¿ç”¨ç›¸åº”è¯­è¨€çš„æ ‡ç­¾ï¼ŒDocusaurus ä¼šè‡ªåŠ¨ç”¨ [Prism React Renderer](https://github.com/FormidableLabs/prism-react-renderer) é€‰æ‹©ç›¸åº”çš„è¯­æ³•é«˜äº®ã€‚
<BrowserWindow>

```js
console.log('æ¯ä¸ªä»“åº“éƒ½åº”è¯¥æœ‰ä¸ªå‰ç¥¥ç‰©ã€‚');
```

</BrowserWindow>

### é«˜äº®ä¸»é¢˜ {#theming}

é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ [Palenight](https://github.com/FormidableLabs/prism-react-renderer/blob/master/packages/prism-react-renderer/src/themes/palenight.ts) ä½œä¸º Prism [è¯­æ³•é«˜äº®ä¸»é¢˜](https://github.com/FormidableLabs/prism-react-renderer#theming)ã€‚ ä½ å¯ä»¥é€šè¿‡ docusaurus.config.js ä¸­çš„ `themeConfig.prism` çš„ `theme` å­—æ®µæ¥æ›´æ”¹ä¸»é¢˜ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ å–œæ¬¢ `dracula` é«˜äº®ä¸»é¢˜ï¼š

```js title="docusaurus.config.js"
import {themes as prismThemes} from 'prism-react-renderer';

export default {
  themeConfig: {
    prism: {
      // highlight-next-line
      theme: prismThemes.dracula,
    },
  },
};
```

å› ä¸ºæ¯ä¸ª Prism ä¸»é¢˜éƒ½åªæ˜¯ä¸€ä¸ª JS å¯¹è±¡ï¼Œæ‰€ä»¥å¦‚æœä½ å¯¹é»˜è®¤å€¼ä¸æ»¡æ„ï¼Œä¹Ÿå¯ä»¥å†™ä¸€ä¸ªè‡ªå·±çš„ä¸»é¢˜ã€‚ Docusaurus å¯¹ `github` å’Œ `vsDark` ä¸»é¢˜è¿›è¡Œäº†å¢å¼ºï¼Œä»¥æä¾›æ›´ä¸°å¯Œçš„é«˜äº®æ•ˆæœï¼Œä½ è¿˜å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬å¯¹[æµ…è‰²](https://github.com/facebook/docusaurus/blob/main/website/src/utils/prismLight.ts)å’Œ[æ·±è‰²](https://github.com/facebook/docusaurus/blob/main/website/src/utils/prismDark.ts)ä»£ç å—ä¸»é¢˜çš„å®ç°ã€‚

### æ”¯æŒçš„è¯­è¨€ {#supported-languages}

By default, Docusaurus comes with a subset of [commonly used languages](https://github.com/FormidableLabs/prism-react-renderer/blob/master/packages/generate-prism-languages/index.ts#L10-L25).

:::warning

ä¸€äº›æµè¡Œè¯­è¨€ï¼ŒåŒ…æ‹¬ Javaã€C#ã€PHP åœ¨å†…ï¼Œé»˜è®¤æœªå¯ç”¨ã€‚

:::

è¦æ·»åŠ å…¶ä»– [Prism æ‰€æ”¯æŒçš„è¯­è¨€](https://prismjs.com/#supported-languages)çš„ä»£ç é«˜äº®ï¼Œè¯·å®šä¹‰åœ¨ `additionalLanguages` åˆ—è¡¨ä¸­ã€‚

:::note

æ¯ä¸ªé™„åŠ è¯­è¨€éƒ½å¿…é¡»æ˜¯æœ‰æ•ˆçš„ Prism ç»„ä»¶åç§°ã€‚ æ¯”å¦‚ï¼Œ Prism ä¼šæŠŠ `cs` è¿™ä¸ª_è¯­è¨€_æ˜ å°„åˆ° `csharp`ï¼Œä½†åªæœ‰ `prism-csharp.js` æ‰æ˜¯çœŸå®å­˜åœ¨çš„_ç»„ä»¶_ï¼Œæ‰€ä»¥ä½ éœ€è¦å†™ `additionalLanguages: ['csharp']`ã€‚ ä½ å¯ä»¥ç¿»çœ‹ `node_modules/prismjs/components` æ¥æ‰¾åˆ°æ‰€æœ‰å¯ç”¨çš„ç»„ä»¶ï¼ˆå’Œå¯¹åº”è¯­è¨€ï¼‰ã€‚

:::

ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³è¦æ”¯æŒ PowerShell è¯­è¨€çš„é«˜äº®ï¼š

```js title="docusaurus.config.js"
export default {
  // ...
  themeConfig: {
    prism: {
      // highlight-next-line
      additionalLanguages: ['powershell'],
    },
    // ...
  },
};
```

æ·»åŠ  `additionalLanguages` åï¼Œé‡å¯ Docusaurusã€‚

å¦‚æœä½ æƒ³æ·»åŠ  Prism æ‰€ä¸æ”¯æŒè¯­è¨€çš„è¯­æ³•é«˜äº®åŠŸèƒ½ï¼Œä½ å¯ä»¥ swizzle `prism-include-languages`ï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic prism-include-languages
```

è¿™ä¸ªå‘½ä»¤ä¼šåœ¨ä½ çš„ `src/theme` ç›®å½•ä¸‹ç”Ÿæˆ `prism-include-languages.js`ã€‚ ä½ ä¹Ÿå¯ä»¥é€šè¿‡ç¼–è¾‘ `prism-include-languages.js` æ¥æ·»åŠ è‡ªå®šä¹‰è¯­è¨€çš„é«˜äº®æ”¯æŒï¼š

```js title="src/theme/prism-include-languages.js"
const prismIncludeLanguages = (Prism) => {
  // ...

  additionalLanguages.forEach((lang) => {
    require(`prismjs/components/prism-${lang}`);
  });

  // highlight-next-line
  require('/path/to/your/prism-language-definition');

  // ...
};
```

åœ¨æ’°å†™è‡ªå·±çš„è¯­è¨€å®šä¹‰æ—¶ï¼Œä½ å¯ä»¥å‚è€ƒ [Prism çš„å®˜æ–¹è¯­è¨€å®šä¹‰](https://github.com/PrismJS/prism/tree/master/components)ã€‚

å½“ä½ æ·»åŠ è‡ªå·±å®šä¹‰çš„è¯­è¨€æ—¶ï¼Œä½ ä¸éœ€è¦å†å°†è¯­è¨€æ·»åŠ åˆ°é…ç½®æ–‡ä»¶ ` additionalLanguages` å­—æ®µçš„æ•°ç»„ä¸­ï¼Œå› ä¸º Docusaurus åªä¼šåŒ¹é… Prism æ‰€æ”¯æŒçš„è¯­è¨€ä¸­ä¸ ` additionalLanguages` ç›¸ç¬¦åˆçš„ã€‚ åœ¨ `prism-include-languages.js` ä¸­æ·»åŠ è¯­è¨€å¯¼å…¥å³å¯ã€‚

## è¡Œé«˜äº® {#line-highlighting}

### ç”¨æ³¨é‡Šå®ç°è¡Œé«˜äº® {#highlighting-with-comments}

ä½ å¯ä»¥é€šè¿‡åœ¨æ³¨é‡Šä¸­åŠ å…¥ `highlight-next-line`, `highlight-start`, å’Œ `highlight-end` æ¥é€‰ä¸­å“ªäº›è¡Œå¯ä»¥è¢«é«˜äº®ã€‚

````md
```js
function HighlightSomeText(highlight) {
  if (highlight) {
    // highlight-next-line
    return 'è¿™è¡Œè¢«é«˜äº®äº†ï¼';
  }

  return 'è¿™é‡Œä¸ä¼š';
}

function HighlightMoreText(highlight) {
  // highlight-start
  if (highlight) {
    return 'è¿™å—è¢«é«˜äº®äº†ï¼';
  }
  // highlight-end

  return 'è¿™é‡Œä¸ä¼š';
}
```
````

```mdx-code-block
<BrowserWindow>
```

```js
function HighlightSomeText(highlight) {
  if (highlight) {
    // highlight-next-line
    return 'è¿™è¡Œè¢«é«˜äº®äº†ï¼';
  }

  return 'è¿™é‡Œä¸ä¼š';
}

function HighlightMoreText(highlight) {
  // highlight-start
  if (highlight) {
    return 'è¿™æ®µè¢«é«˜äº®äº†ï¼';
  }
  // highlight-end

  return 'è¿™é‡Œä¸ä¼š';
}
```

```mdx-code-block
</BrowserWindow>
```

å—æ”¯æŒçš„æ³¨é‡Šè¯­æ³•ï¼š

| æ ·å¼      | è¯­æ³•                     |
| ------- | ---------------------- |
| C æ ·å¼    | `/* ... */` åŠ `// ...` |
| JSX æ ·å¼  | `{/* ... */}`          |
| Bash æ ·å¼ | `# ...`                |
| HTML æ ·å¼ | `<!-- ... -->`   |

æˆ‘ä»¬ä¼šå°½å¯èƒ½åœ°æ ¹æ®è¯­è¨€æ¥æ¨æ–­æ³¨é‡Šé£æ ¼çš„æ ·å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹å…è®¸_æ‰€æœ‰çš„_æ³¨é‡Šé£æ ¼ã€‚ å¦‚æœæœ‰ä»»ä½•æ³¨é‡Šé£æ ¼æš‚æ—¶æ²¡æœ‰è¢«æ”¯æŒï¼Œæˆ‘ä»¬ä¹æ„å»æ·»åŠ å¯¹å®ƒä»¬çš„æ”¯æŒã€‚ æ¬¢è¿å‘èµ·æ‹‰å–è¯·æ±‚ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸åŒæ³¨é‡Šé£æ ¼ä¸ä¼šæœ‰è¯­ä¹‰ä¸Šçš„å·®åˆ«ï¼Œåªä¼šæœ‰å†…å®¹ä¸Šçš„ã€‚

ä½ å¯ä»¥åœ¨ä½ çš„è‡ªå®šä¹‰æ ·å¼æ–‡ä»¶ `src/css/custom.css` ä¸­ä¸ºé«˜äº®çš„ä»£ç è¡Œè®¾ç½®è‡ªå·±çš„èƒŒæ™¯é¢œè‰²ï¼Œè®©å®ƒæ›´é€‚åˆä½ é€‰å®šçš„è¯­è¨€é«˜äº®ä¸»é¢˜ã€‚ ä¸‹æ–¹çš„é¢œè‰²é€‚ç”¨äºé»˜è®¤çš„è¯­æ³•é«˜äº®ä¸»é¢˜ï¼ˆPalenightï¼‰ã€‚å¦‚æœä½ ä½¿ç”¨å…¶ä»–çš„ä¸»é¢˜ï¼Œä¹Ÿéœ€è¦åšå‡ºç›¸åº”çš„é¢œè‰²è°ƒæ•´ã€‚

```css title="/src/css/custom.css"
:root {
  --docusaurus-highlighted-code-line-bg: rgb(72, 77, 91);
}

/* å¦‚æœä½ åœ¨æš—é»‘æ¨¡å¼ç”¨äº†ä¸åŒçš„è¯­æ³•é«˜äº®ä¸»é¢˜ã€‚ */
[data-theme='dark'] }
  /* æš—é»‘æ¨¡å¼é«˜äº®ä¸»é¢˜ä¸‹ç”¨çš„èƒŒæ™¯è‰² */
  --docusaurus-highed code-bg: rgb(100, 100);
}
```

å¦‚æœä½ è¿˜éœ€è¦ç»™é«˜äº®ä»£ç è¡ŒåŠ å…¶ä»–æ ·å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ `theme-block-high-lighted-line` çš„ CSS ç±»åè¿›è¡Œæ ·å¼è®¾ç½®ã€‚

### ç”¨å…ƒæ•°æ®å­—ç¬¦ä¸²å®ç°é«˜äº® {#highlighting-with-metadata-string}

ä½ ä¹Ÿå¯ä»¥åœ¨å…ƒæ•°æ®å­—ç¬¦ä¸²ä¸­æŒ‡å®šé«˜äº®è¡Œçš„èŒƒå›´ï¼ˆéœ€è¦åœ¨è¯­è¨€ç§ç±»åç•™ä¸€ä¸ªç©ºæ ¼ï¼‰ã€‚ è¦é«˜äº®å¤šè¡Œå†…å®¹ï¼Œè¯·ä½¿ç”¨è‹±æ–‡åŠè§’é€—å·æ¥åˆ†éš”è¡Œå·ï¼Œæˆ–ä½¿ç”¨èŒƒå›´è¯­æ³•æ¥é€‰æ‹©å¤šè¡Œä»£ç å—ä»¥é«˜äº®ã€‚ è¿™ä¸ªåŠŸèƒ½æ˜¯é€šè¿‡ `parse-number-range` è¿™ä¸ªåº“å®ç°çš„ï¼Œä½ å¯ä»¥åœ¨å®ƒçš„é¡¹ç›®è¯¦æƒ…ä¸­æ‰¾åˆ°[æ›´å¤šè¯­æ³•ä½¿ç”¨æ–¹å¼](https://www.npmjs.com/package/parse-numeric-range)ã€‚

````md
```jsx {1,4-6,11}
import React from 'react';

function MyComponent(props) {
  if (props.isBar) {
    return <div>Bar</div>;
  }

  return <div>Foo</div>;
}

export default MyComponent;
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx {1,4-6,11}
import React from 'react';

function MyComponent(props) {
  if (props.isBar) {
    return <div>Bar</div>;
  }

  return <div>Foo</div>;
}

export default MyComponent;
```

```mdx-code-block
</BrowserWindow>
```

:::tip æ¨èçš„æ³¨é‡Šæ–¹å¼

æ¨èä½ ä½¿ç”¨æ³¨é‡Šæ¥å®ç°è¯­æ³•é«˜äº®ã€‚ å¦‚æœä½ æŠŠé€šè¿‡å†…åµŒçš„æ³¨é‡Šæ¥é«˜äº®ä»£ç ï¼Œä½ å°±ä¸éœ€è¦åœ¨ä»£ç å—å†…å®¹å¾ˆé•¿æ—¶æ‰‹åŠ¨å»æ•°ä»£ç è¡Œæ•°äº†ã€‚ å³ä½¿ä½ æ·»åŠ /åˆ é™¤äº†æŸå‡ è¡Œï¼Œä½ ä¹Ÿä¸éœ€è¦å»è°ƒæ•´è¡Œå·çš„åç§»èŒƒå›´ã€‚

````diff
- ```jsx {3}
+ ```jsx {4}
  function HighlightSomeText(highlight) {
    if (highlight) {
+     console.log('æ‰¾åˆ°äº†é«˜äº®æ–‡æœ¬');
      return 'è¿™ä¸ªæ–‡æœ¬é«˜äº®äº†ï¼';
    }

    return 'æ²¡å•¥è¢«é«˜äº®äº†';
  }
  ```
````
ä¸‹é¢æˆ‘ä»¬å°†ä»‹ç»å¯æ‰©å±•çš„é­”æ³•æ³¨é‡Šæ˜¯å¦‚ä½•å®ç°è‡ªå®šä¹‰æŒ‡ä»¤åŠå’ŒåŠŸèƒ½çš„ã€‚ åªæœ‰åœ¨ä¸ä½¿ç”¨å…ƒæ•°æ®å­—ç¬¦ä¸²çš„æ•°å­—èŒƒå›´æ—¶ï¼Œé­”æ³•æ³¨é‡Šæ‰ä¼šè¢«è§£æã€‚
:::
### è‡ªå®šä¹‰é­”æ³•æ³¨é‡Š {#custom-magic-comments}
`// highlight-next-line` å’Œ `// highlight-start` ç­‰æ³¨é‡Šæ–¹å¼è¢«ç§°ä½œâ€œé­”æ³•æ³¨é‡Šâ€ï¼Œå› ä¸ºå®ƒä»¬è¢«ç”¨äºä¸ºä¸‹ä¸€è¡Œæ·»åŠ å…ƒæ•°æ®ï¼Œæˆ–è€…ä¸ºå¼€å§‹æ³¨é‡Šå’Œç»“æŸæ³¨é‡Šä¹‹é—´çš„ä»£ç è¡Œæ·»åŠ å…ƒæ•°æ®ï¼Œå®ƒä»¬ä¼šåœ¨è¢«è§£æä¹‹åä»ä»£ç å—ä¸­åˆ é™¤ã€‚
ä½ å¯ä»¥é€šè¿‡ä¸»é¢˜é…ç½®æ¥è®¾å®šä½ çš„è‡ªå®šä¹‰é­”æ³•æ³¨é‡Šã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥é€šè¿‡æ³¨å†Œå¦ä¸€ä¸ªåŒ…å«æœ‰ `code-block-error-line` ç±»åçš„é­”æ³•æ³¨é‡Šï¼š

```mdx-code-block
<Tabs>
<TabItem value="docusaurus.config.js">
```

```js
export default {
  themeConfig: {
    prism: {
      magicComments: [
        // è®°ä½ä¹Ÿè¦æ‰©å±•é»˜è®¤é«˜äº®ç±»åç§°ï¼
        {
          className: 'theme-code-block-highlighted-line',
          line: 'highlight-next-line',
          block: {start: 'highlight-start', end: 'highlight-end'},
        },
        // highlight-start
        {
          className: 'code-block-error-line',
          line: 'This will error',
        },
        // highlight-end
      ],
    },
  },
};
```

```mdx-code-block
</TabItem>
<TabItem value="src/css/custom.css">
```

```css
.code-block-error-line {
  background-color: #ff000020;
  display: block;
  margin: 0 calc(-1 * var(--ifm-pre-padding));
  padding: 0 var(--ifm-pre-padding);
  border-left: 3px solid #ff000080;
}
```

```mdx-code-block
</TabItem>
<TabItem value="myDoc.md">
```

````md
åœ¨ JavaScript ä¸­ï¼Œè¯•å›¾è®¿é—® `null` çš„å±æ€§ä¼šæŠ¥é”™ã€‚

```js
const name = null;
// This will error
console.log(name.toUpperCase());
// Uncaught TypeError: Cannot read properties of null (reading 'toUpperCase')
```
````

```mdx-code-block
</TabItem>
</Tabs>
```

```mdx-code-block
<BrowserWindow>
```

åœ¨ JavaScript ä¸­ï¼Œè¯•å›¾è®¿é—® `null` ä¸Šçš„å±æ€§æ—¶ä¼šæŠ¥é”™ã€‚

```js
const name = null;
// This will error
console.log(name.toUpperCase());
// Uncaught TypeError: Cannot read properties of null (reading 'toUpperCase')
```

```mdx-code-block
</BrowserWindow>
```

å¦‚æœä½ åœ¨å…ƒæ•°æ®å­—ç¬¦ä¸²ä¸­ç”¨äº†æ•°å­—èŒƒå›´ï¼ˆç±»ä¼¼äº `{1,3-4}` è¿™ç§è¯­æ³•ï¼‰ï¼ŒDocusaurus ä¼šä½¿ç”¨ **`magicComments` å­—æ®µä¸­ç¬¬ä¸€é¡¹çš„ className ** ä½œä¸ºç±»åã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œç±»åä½¿ç”¨çš„æ˜¯ `theme-code-block-highlighted-line`ï¼Œä½†å¦‚æœä½ ä¿®æ”¹äº†é…ç½®ä¸­ `magicComments` ä¸­çš„é…ç½®é¡¹ï¼Œå¹¶ä¸”ä½¿ç”¨äº†ä¸åŒçš„é¡¹ç›®ä½œä¸ºç¬¬ä¸€é¡¹çš„å€¼ï¼Œé‚£ä¹ˆå…ƒæ•°æ®å­—ç¬¦ä¸²ä¸­æ•°å­—èŒƒå›´çš„ç±»åä¹Ÿä¼šæ ¹æ®ç¬¬ä¸€é¡¹çš„å€¼è€Œæ”¹å˜ã€‚

ä½ å¯ä»¥é€šè¿‡è®¾ç½® `magicComments: []` æ¥ç¦ç”¨é»˜è®¤çš„é«˜äº®æ³¨é‡Šæ ·å¼ã€‚ å¦‚æœé­”æ³•æ³¨é‡Šçš„é…ç½®æ˜¯ç©ºæ•°ç»„ï¼Œä½†ä½¿ç”¨äº†ä¸€ä¸ªåŒ…å«æ•°å­—èŒƒå›´çš„ä»£ç å—æ—¶ï¼ŒDocusaurus å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰å¯ä»¥åº”ç”¨ç»™ç±»åçš„é…ç½®é¡¹â€”â€”é«˜äº®çš„ç±»åæ¯•ç«Ÿåªæ˜¯ä¸€ä¸ªé­”æ³•æ³¨é‡Šé…ç½®çš„é¡¹ç›®è€Œå·²ã€‚

æ¯ä¸ªé­”æ³•æ³¨é‡Šçš„é…ç½®é¡¹ä¼šåŒ…å«ä¸‰ä¸ªå­—æ®µï¼š`classname`ï¼ˆå¿…å¡«ï¼‰ï¼›`line`ï¼Œä¼šåº”ç”¨äºé­”æ³•æ³¨é‡Šçš„ä¸‹ä¸€è¡Œï¼›`block` å­—æ®µï¼ˆåŒ…å« `start` å’Œ `end` ä¸¤ä¸ªå­—æ®µï¼‰ï¼Œä¼šåº”ç”¨äºä¸¤ä¸ªé­”æ³•æ³¨é‡Šæ‰€åŒ…è£¹çš„æ•´ä¸ªç‰‡æ®µã€‚

ç”¨ CSS ç±»åæŒ‡å®šæ ·å¼å·²ç»è¶³å¤Ÿåšå¾ˆå¤šäº‹æƒ…äº†ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ [swizzling](../../swizzling.mdx) æ¥è§£é”è¿™ä¸ªåŠŸèƒ½çš„å®Œæ•´èƒ½åŠ›ã€‚

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic CodeBlock/Line
```

`Line` ç»„ä»¶å…è®¸æ¥æ”¶ç±»ååˆ—è¡¨çš„å‚æ•°ã€‚åŸºäºè¿™ä¸ªåˆ—è¡¨ï¼Œä½ å¯ä»¥æ¡ä»¶æ€§åœ°æ¸²æŸ“ä¸åŒçš„ç»“æœã€‚

## è¡Œå· {#line-numbering}

ä½ å¯ä»¥é€šè¿‡åœ¨å…ƒæ•°æ®å­—ç¬¦ä¸²ä¸­æ·»åŠ  `showLineNumbers` æ¥ä¸ºä½ çš„ä»£ç å—å¯ç”¨æ˜¾ç¤ºè¡Œå·çš„åŠŸèƒ½ï¼ˆåˆ«å¿˜äº†åœ¨è¿™ä¸ªå­—æ®µå‰é¢åŠ ä¸€ä¸ªç©ºæ ¼ï¼‰ã€‚

````md
```jsx showLineNumbers
import React from 'react';

export default function MyComponent(props) {
  return <div>Foo</div>;
}
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx showLineNumbers
import React from 'react';

export default function MyComponent(props) {
  return <div>Foo</div>;
}
```

```mdx-code-block
</BrowserWindow>
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¡æ•°å™¨ä»¥è¡Œå·1å¼€å§‹ã€‚ å¯ä»¥ä¼ é€’ä¸€ä¸ªè‡ªå®šä¹‰è®¡æ•°å™¨å¼€å§‹å€¼æ¥æ‹†åˆ†å¤§å‹ä»£ç å—ä»¥ä¾¿å¢å¼ºå¯è¯»æ€§ï¼š

````md
```jsx showLineNumbers=3
export default function MyComponent(props) {
  return <div>Foo</div>;
}
```
````

```mdx-code-block
<BrowserWindow>
```

```jsx showLineNumbers=3
export default function MyComponent(props) {
  return <div>Foo</div>;
}
```

```mdx-code-block
</BrowserWindow>
```

## äº¤äº’å¼ä»£ç ç¼–è¾‘å™¨ {#interactive-code-editor}

(ç”± [React Live](https://github.com/FormidableLabs/react-live) é©±åŠ¨)

ä½ å¯ä»¥é€šè¿‡ `@docusaurus/theme-live-codeblock` æ’ä»¶åˆ›å»ºå¯äº¤äº’çš„ä»£ç ç¼–è¾‘å™¨ï¼Œ é¦–å…ˆï¼Œå°†æ’ä»¶æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¾èµ–ã€‚

```bash npm2yarn
npm install --save @docusaurus/theme-live-codeblock
```

ä½ è¿˜éœ€è¦æŠŠæ’ä»¶æ·»åŠ åˆ° `docusaurus.config.js` çš„è®¾ç½®ä¸­ã€‚

```js {3}
export default {
  // ...
  themes: ['@docusaurus/theme-live-codeblock'],
  // ...
};
```

è¦ä½¿ç”¨æ­¤æ’ä»¶ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªä»£ç å—ï¼ŒåŒæ—¶åœ¨ä»£ç å—è¯­è¨€çš„å…ƒæ•°æ®å­—ç¬¦ä¸²ä¸­åŠ ä¸Š `live`ã€‚

````md
```jsx live
function Clock(props) {
  const [date, setDate] = useState(new Date());
  useEffect(() => {
    const timerID = setInterval(() => tick(), 1000);

    return function cleanup() {
      clearInterval(timerID);
    };
  });

  function tick() {
    setDate(new Date());
  }

  return (
    <div>
      <h2>ç°åœ¨æ˜¯ {date.toLocaleTimeString()}ã€‚</h2>
    </div>
  );
}
```
````
è¿™ä¸ªä»£ç å—ä¼šè¢«æ¸²æŸ“æˆä¸€ä¸ªå¯äº¤äº’çš„ä»£ç ç¼–è¾‘å™¨ã€‚ ä»£ç çš„å˜æ›´ç»“æœå°†ä¼šå®æ—¶æ˜¾ç¤ºåœ¨ç»“æœçš„é¢„è§ˆåŒºåŸŸã€‚

```mdx-code-block
<BrowserWindow>
```

```jsx live
function Clock(props) {
  const [date, setDate] = useState(new Date());
  useEffect(() => {
    const timerID = setInterval(() => tick(), 1000);

    return function cleanup() {
      clearInterval(timerID);
    };
  });

  function tick() {
    setDate(new Date());
  }

  return (
    <div>
      <h2>ç°åœ¨æ˜¯ {date.toLocaleTimeString()}ã€‚</h2>
    </div>
  );
}
```

```mdx-code-block
</BrowserWindow>
```

### å¯¼å…¥ {#imports}

:::warning react-live å’Œå¯¼å…¥

ä½ ä¸èƒ½ä» react-live çš„ä»£ç ç¼–è¾‘å™¨ä¸­ç›´æ¥å¯¼å…¥ç»„ä»¶ã€‚ä½ å¾—æ˜¾å¼åœ°é¢„å…ˆå®šä¹‰å¥½æ‰€æœ‰ç»„ä»¶å¯¼å…¥é¡¹ã€‚

:::

é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ React çš„æ‰€æœ‰å¯¼å…¥é¡¹ã€‚ å¦‚æœä½ éœ€è¦æ›´å¤šå¯å¯¼å…¥é¡¹ï¼Œä½ é€šè¿‡ swizzle ç»„ä»¶ react-live scope æ¥è·å–ï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-live-codeblock ReactLiveScope -- --eject
```

```jsx title="src/theme/ReactLiveScope/index.js"
import React from 'react';

// highlight-start
const ButtonExample = (props) => (
  <button
    {...props}
    style={{
      backgroundColor: 'white',
      color: 'black',
      border: 'solid red',
      borderRadius: 20,
      padding: 10,
      cursor: 'pointer',
      ...props.style,
    }}
  />
);
// highlight-end

// åœ¨è¿™é‡Œæ·»åŠ ä½ éœ€è¦çš„ react-live å¯¼å…¥é¡¹
const ReactLiveScope = {
  React,
  ...React,
  // highlight-next-line
  ButtonExample,
};

export default ReactLiveScope;
```

ç°åœ¨ `ButtonExample` å¯ä»¥æä¾›ä½¿ç”¨äº†ã€‚

```mdx-code-block
<BrowserWindow>
```

```jsx live
function MyPlayground(props) {
  return (
    <div>
      <ButtonExample {() => alert('hey!')}>ç‚¹æˆ‘</ButtonExample>
    </div>
  );
}
```

```mdx-code-block
</BrowserWindow>
```

### å‘½ä»¤å¼æ¸²æŸ“ (noInline)

å¦‚æœä½ çš„ä»£ç æ¶‰åŠåˆ°è·¨è¡Œçš„å¤šä¸ªç»„ä»¶æˆ–å˜é‡ï¼Œä½ éœ€è¦æ·»åŠ  `noInline` é¡¹æ¥é¿å…æŠ¥é”™ã€‚

````md
```jsx live noInline
const project = 'Docusaurus';

const Greeting = () => <p>Hello {project}!</p>;

render(<Greeting />);
```
````
ä¸æ™®é€šäº¤äº’å¼ä»£ç å—ä¸åŒï¼Œå½“ä½¿ç”¨ `noInline` é¡¹æ—¶ï¼ŒReact Live ä¸ä¼šæŠŠä½ çš„ä»£ç åŒ…è£¹åœ¨è¡Œå†…å‡½æ•°ç›´æ¥æ¸²æŸ“ã€‚
ä½ éœ€è¦åœ¨ä»£ç å—çš„æœ«å°¾æ˜¾å¼åœ°è°ƒç”¨ `render()` æ¥æ¸²æŸ“ç»“æœã€‚

````mdx-code-block
<BrowserWindow>

```jsx live noInline
const project = "Docusaurus";

const Greeting = () => (
  <p>Hello {project}!</p>
);

render(
  <Greeting />
);
```

</BrowserWindow>
````
## åœ¨ä»£ç å—ä¸­ä½¿ç”¨ JSX æ ‡è®° {#using-jsx-markup}
Markdown ä¸­çš„ä»£ç å—æ€»æ˜¯å°†å…¶å†…å®¹ä½œä¸ºçº¯æ–‡æœ¬ä¿ç•™ï¼Œè¿™æ„å‘³ç€ä½ ä¸èƒ½åƒä¸‹é¢è¿™æ ·è¿™ä¹ˆå†™ï¼š

```ts
type EditUrlFunction = (params: {
  // è¿™ä¸ä¼šå˜æˆé“¾æ¥ï¼ˆå¾ˆæœ‰é“ç†ï¼ï¼‰
  version: <a href="/docs/versioning">Version</a>;
  versionDocsDirPath: string;
  docPath: string;
  permalink: string;
  locale: string;
}) => string | undefined;
```

å¦‚æœä½ æƒ³å†…åµŒ HTML æ ‡ç­¾ï¼Œæ¯”å¦‚é“¾æ¥æˆ–è€…ç²—ä½“ï¼Œä½ å¯ä»¥ç”¨ `<pre>` æ ‡ç­¾ã€`<code>` æ ‡ç­¾ã€æˆ– `<CodeBlock>` ç»„ä»¶ã€‚

```jsx
<pre>
  <b>è¾“å…¥ï¼š</b>1 2 3 4{'\n'}
  <b>è¾“å‡ºï¼š</b>"366300745"{'\n'}
</pre>
```

<BrowserWindow>
  <pre>
    <b>{'Input: '}</b>
    {'1 2 3 4\n'}
    <b>{'Output: '}</b>
    {'"366300745"\n'}
  </pre>
</BrowserWindow>

:::warning MDX å¯¹ç©ºæ ¼ä¸æ•æ„Ÿ

MDX ä¸ JSX è¡Œä¸ºä¸€è‡´ï¼šå³ä½¿åœ¨ `<pre>` å†…ï¼Œæ¢è¡Œç¬¦ä¹Ÿä¼šè½¬æ¢æˆç©ºæ ¼ã€‚ ä½ å¿…é¡»æ˜¾å¼åœ°å†™ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œå®ƒæ‰ä¼šçœŸçš„æ˜¾ç¤ºæˆæ¢è¡Œæ•ˆæœã€‚

:::

:::warning

è¯­æ³•é«˜äº®åªé€‚ç”¨äºçº¯å­—ç¬¦ä¸²ã€‚ Docusaurus ä¸ä¼šè¯•å›¾è§£æä»£ç å—é‡ŒåŒ…å«çš„ JSX å­å…ƒç´ ä¸­çš„å†…å®¹ã€‚

:::

## æ”¯æŒå¤šè¯­è¨€çš„ä»£ç å— {#multi-language-support-code-blocks}

ä½ å¯ä»¥é€šè¿‡ MDX çš„èƒ½åŠ›åœ¨æ–‡æ¡£ä¸­åˆ›é€ å¯äº¤äº’çš„ç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨é€‰é¡¹å¡ç»„ä»¶æ¥åˆ‡æ¢å¹¶å±•ç¤ºåŒ…å«å¤šç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç ç¤ºä¾‹ã€‚

æˆ‘ä»¬å¹¶æ²¡æœ‰ä¸ºå¤šè¯­è¨€ä»£ç å—å»ç¼–å†™ä¸“ç”¨çš„ç»„ä»¶ï¼Œè€Œæ˜¯åœ¨ç»å…¸ä¸»é¢˜ä¸­å®ç°äº†é€šç”¨çš„ [`<Tabs>`](./markdown-features-tabs.mdx) ç»„ä»¶ï¼Œä»¥ä¾¿ä½ åœ¨å…¶ä»–éä»£ç çš„åœºæ™¯ä¸­ä¹Ÿèƒ½å¤Ÿä½¿ç”¨ã€‚

ä¸‹é¢çš„ä¾‹å­ä»‹ç»äº†å¦‚ä½•åœ¨æ–‡æ¡£ä¸­ä½¿ç”¨é€‰é¡¹å¡å±•ç¤ºå¤šä¸ªç¼–ç¨‹è¯­è¨€çš„ä»£ç å—ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬**ç‰¹æ„**åœ¨æ¯ä¸€ä¸ªä»£ç å—çš„ä¸Šä¸‹å„ç©ºäº†ä¸€è¡Œã€‚ è¿™æ˜¯ä¸€ä¸ª [MDX ç›®å‰çš„æŠ€æœ¯é™åˆ¶](./markdown-features-react.mdx#markdown-and-jsx-interoperability)ï¼šä½ å¿…é¡»åœ¨ Markdown è¯­æ³•å—çš„ä¸Šä¸‹ç•™å„ç•™ä¸‹ä¸€è¡Œç©ºè¡Œï¼Œ MDX è§£æå™¨æ‰èƒ½çŸ¥é“è¿™é‡Œæ˜¯ Markdown è¯­æ³•ï¼Œè€Œä¸æ˜¯ JSX è¯­æ³•ã€‚

````jsx
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="js" label="JavaScript">

```js
function helloWorld() {
  console.log('Hello, world!');
}
```

</TabItem>
<TabItem value="py" label="Python">

```py
def hello_world():
  print("Hello, world!")
```

</TabItem>
<TabItem value="java" label="Java">

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("Hello, World");
  }
}
```

</TabItem>
</Tabs>
````
ä½ å°†çœ‹åˆ°ä»¥ä¸‹çš„æ•ˆæœï¼š

```mdx-code-block
<BrowserWindow>
<Tabs>
<TabItem value="js" label="JavaScript">
```

```js
function helloWorld() {
  console.log('Hello, world!');
}
```

```mdx-code-block
</TabItem>
<TabItem value="py" label="Python">
```

```py
def hello_world():
  print("Hello, world!")
```

```mdx-code-block
</TabItem>
<TabItem value="java" label="Java">
```

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("Hello, World");
  }
}
```

```mdx-code-block
</TabItem>
</Tabs>
</BrowserWindow>
```

å¦‚æœä½ æœ‰å¤šä¸ªå¤šè¯­è¨€é€‰é¡¹å¡ï¼Œè€Œä¸”ä½ å¸Œæœ›åœ¨å¤šä¸ªé€‰é¡¹ç»„ä¹‹é—´åŒæ­¥é€‰é¡¹å¡çš„é€‰é¡¹ï¼Œè¯·å‚è€ƒ[åŒæ­¥é€‰é¡¹](markdown-features-tabs.mdx#syncing-tab-choices)ç« èŠ‚ã€‚

### Docusaurus npm2yarn remark æ’ä»¶ {#npm2yarn-remark-plugin}

éœ€è¦åŒæ—¶æ˜¾ç¤º npm å’Œ Yarn çš„ CLI å‘½ä»¤å¾ˆå¸¸è§ï¼Œæ¯”å¦‚ï¼š

```bash npm2yarn
npm install @docusaurus/remark-plugin-npm2yarn
```

Docusaurus æä¾›äº†è¿™æ ·ä¸€ä¸ªå·¥å…·ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨æ¯æ¬¡éƒ½å†™ `Tabs` ç»„ä»¶äº†ã€‚ è¦å¯ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œè¯·å…ˆå®‰è£… `@docusaurus/remark-plugin-npm2yarn` æ’ä»¶ï¼Œç„¶ååœ¨ `docusaurus.config.js` ä¸­ï¼Œå¯¹äºä½ éœ€è¦è¿™ä¸ªæ’ä»¶åŠŸèƒ½çš„åœ°æ–¹ï¼ˆæ–‡æ¡£ã€åšå®¢ã€é¡µé¢ç­‰ç­‰ï¼‰ï¼Œåœ¨ `remarkPlugins` å­—æ®µé€‰é¡¹é‡Œæ³¨å†Œè¿™ä¸ªæ’ä»¶ã€‚ ï¼ˆå…³äºé…ç½®æ ¼å¼çš„æ›´å¤šè¯¦æƒ…ï¼Œè¯·å‚é˜…[ç¤ºä¾‹é…ç½®](../../api/plugins/plugin-content-docs.mdx#ex-config)ï¼‰

```js title="docusaurus.config.js"
export default {
  // ...
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          // highlight-start
          remarkPlugins: [
            [require('@docusaurus/remark-plugin-npm2yarn'), {sync: true}],
          ],
          // highlight-end
        },
        pages: {
          // highlight-next-line
          remarkPlugins: [require('@docusaurus/remark-plugin-npm2yarn')],
        },
        blog: {
          // highlight-start
          remarkPlugins: [
            [
              require('@docusaurus/remark-plugin-npm2yarn'),
              {converters: ['pnpm']},
            ],
          ],
          // highlight-end
          // ...
        },
      },
    ],
  ],
};
```

ç„¶åé€šè¿‡åœ¨ä»£ç å—ä¸­æ·»åŠ  `npm2yarn` å…³é”®å­—æ¥ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼š

````md
```bash npm2yarn
npm install @docusaurus/remark-plugin-npm2yarn
```
````
#### é…ç½® {#npm2yarn-remark-plugin-configuration}
| é€‰é¡¹           | ç±»å‹        | é»˜è®¤å€¼                | æè¿°                                    |
| ------------ | --------- | ------------------ | ------------------------------------- |
| `sync`       | `boolean` | `false`            | æ˜¯å¦åœ¨æ‰€æœ‰ä»£ç å—ä¸­åŒæ­¥æ‰€é€‰è½¬æ¢å™¨ã€‚                     |
| `converters` | `array`   | `'yarn'`, `'pnpm'` | è¦ä½¿ç”¨çš„è½¬æ¢å™¨åˆ—è¡¨ã€‚ è½¬æ¢å™¨çš„é¡ºåºå¾ˆé‡è¦ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªè½¬æ¢å™¨å°†ä½œä¸ºé»˜è®¤é€‰æ‹©ã€‚ |
## JSX ä¸­çš„ç”¨æ³• {#usage-in-jsx}
åœ¨ Markdown ä¹‹å¤–ï¼Œä½ å¯ä»¥ä½¿ç”¨ `@theme/CodeBlock` ç»„ä»¶æ¥è·å¾—ç›¸åŒçš„è¾“å‡ºã€‚

```jsx
import CodeBlock from '@theme/CodeBlock';

export default function MyReactPage() {
  return (
    <div>
      {/* highlight-start */}
      <CodeBlock
        language="jsx"
        title="/src/components/HelloCodeTitle.js"
        showLineNumbers>
        {`function HelloCodeTitle(props) {
  return <h1>ä½ å¥½ï¼Œ{props.name}</h1>;
}`}
      </CodeBlock>
      {/* highlight-end */}
    </div>
  );
}
```

```mdx-code-block
<BrowserWindow>
  <CodeBlock
    language="jsx"
    title="/src/components/HelloCodeTitle.js"
    showLineNumbers>
    {`function HelloCodeTitle(props) {
  return <h1>ä½ å¥½ï¼Œ{props.name}</h1>;
}`}
  </CodeBlock>
</BrowserWindow>
```

æ¥å—çš„å±æ€§åä¸º `language`ã€`title` å’Œ `showLineNumbers`ï¼Œå’Œä½ åœ¨ Markdown ä¸­ä¹¦å†™ä»£ç å—çš„æ–¹æ³•ä¸€æ ·ã€‚

è™½ç„¶ä¸å»ºè®®ä½ è¿™ä¹ˆåšï¼Œä½†ä½ ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ª `metastring` å±æ€§ï¼Œæ¯”å¦‚ `metastring='{1-2} title="/src/components/HelloCodeTitle.js" showLineNumbers'`ã€‚Markdown ä»£ç å—åœ¨åº•å±‚å°±æ˜¯è¿™ä¹ˆè¢«å¤„ç†çš„ã€‚ ç„¶è€Œï¼Œæˆ‘ä»¬è¿˜æ˜¯å»ºè®®ä½ [ç”¨æ³¨é‡Šå®ç°è¡Œé«˜äº®](#highlighting-with-comments)ã€‚

å¦‚[å‰æ–‡æ‰€è¿°](#using-jsx-markup)ï¼Œè¯­æ³•é«˜äº®åŠŸèƒ½åªä¼šåœ¨ JSX å­å…ƒç´ æ˜¯ä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸²æ—¶æ‰å¯ç”¨ã€‚
