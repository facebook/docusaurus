---
sidebar_position: 9
slug: /api/plugins/@docusaurus/plugin-pwa
---

# ğŸ“¦ plugin-pwa

Docusaurus Plugin to add PWA support using [Workbox](https://developers.google.com/web/tools/workbox). This plugin generates a [Service Worker](https://developers.google.com/web/fundamentals/primers/service-workers) in production build only, and allows you to create fully PWA-compliant documentation site with offline and installation support.

## Installation {#installation}

```bash npm2yarn
npm install --save @docusaurus/plugin-pwa
```

## Configuration {#configuration}

Create a [PWA manifest](https://web.dev/add-manifest/) at `./static/manifest.json`.

Modify `docusaurus.config.js` with a minimal PWA config, like:

```js title="docusaurus.config.js"
module.exports = {
  plugins: [
    [
      '@docusaurus/plugin-pwa',
      {
        debug: true,
        offlineModeActivationStrategies: [
          'appInstalled',
          'standalone',
          'queryString',
        ],
        pwaHead: [
          {
            tagName: 'link',
            rel: 'icon',
            href: '/img/docusaurus.png',
          },
          {
            tagName: 'link',
            rel: 'manifest',
            href: '/manifest.json', // your PWA manifest
          },
          {
            tagName: 'meta',
            name: 'theme-color',
            content: 'rgb(37, 194, 160)',
          },
        ],
      },
    ],
  ],
};
```

## Progressive Web App {#progressive-web-app}

ì„œë¹„ìŠ¤ ì›Œì»¤ë¥¼ ì„¤ì¹˜í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ì—¬ëŸ¬ë¶„ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ PWAê°€ ë˜ëŠ” ê±´ ì•„ë‹™ë‹ˆë‹¤. You'll need to at least include a [Web App Manifest](https://developer.mozilla.org/en-US/docs/Web/Manifest) and have the correct tags in `<head>` ([Options > pwaHead](#pwahead)).

After deployment, you can use [Lighthouse](https://developers.google.com/web/tools/lighthouse) to run an audit on your site.

For a more exhaustive list of what it takes for your site to be a PWA, refer to the [PWA Checklist](https://developers.google.com/web/progressive-web-apps/checklist)

## App installation support {#app-installation-support}

ì—¬ëŸ¬ë¶„ì˜ ë¸Œë¼ìš°ì €ê°€ ì§€ì›í•œë‹¤ë©´ ë„íì‚¬ìš°ë£¨ìŠ¤ ì‚¬ì´íŠ¸ë¥¼ ì•±ì²˜ëŸ¼ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![A screen recording of the installation process. A button appears in the address bar of the browser, which displays a dialog asking "install this application?" when clicked. After clicking the "Install" button, a new application is opened in the operating system, opening to the Docusaurus homepage.](/img/pwa_install.gif)

:::note

ì•± ì„¤ì¹˜ë¥¼ ì§€ì›í•˜ë ¤ë©´ HTTPS í”„ë¡œí† ì½œì„ ì‚¬ìš©í•´ì•¼ í•˜ë©° ìœ íš¨í•œ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤.

:::

## Offline mode (precaching) {#offline-mode-precaching}

ì„œë¹„ìŠ¤ ì›Œì»¤ ì‚¬ì „ìºì‹±ì„ ì‚¬ìš©í•´ ë„íì‚¬ìš°ë£¨ìŠ¤ ì‚¬ì´íŠ¸ë¥¼ ì˜¤í”„ë¼ì¸ì—ì„œ ì‚¬ìš©ìê°€ íƒìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

The [workbox-precaching](https://developers.google.com/web/tools/workbox/modules/workbox-precaching) page explains the idea:

> ì„œë¹„ìŠ¤ ì›Œì»¤ì˜ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ë¡œ ì„œë¹„ìŠ¤ ì›Œì»¤ ì„¤ì¹˜ ì‹œ ìºì‹œ ì²˜ë¦¬í•  íŒŒì¼ ë¬¶ìŒì„ ì €ì¥í•´ë†“ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì›Œì»¤ê°€ ì‚¬ìš©ë˜ê¸° ì „ì— ì½˜í…ì¸ ë¥¼ ìºì‹œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— "ì‚¬ì „ìºì‹±"ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.
>
> ì´ë ‡ê²Œ ì²˜ë¦¬í•˜ëŠ” ì´ìœ ëŠ” ê°œë°œìì—ê²Œ ìºì‹œë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì„ ì£¼ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. ê°œë°œìëŠ” ìºì‹œë¥¼ ì–¸ì œ ë§Œë“¤ê³  ì–¼ë§ˆë‚˜ ì˜¤ë˜ ë³´ê´€í• ì§€ ê²°ì •í•  ìˆ˜ ìˆì„ ë¿ ì•„ë‹ˆë¼ ë„¤íŠ¸ì›Œí¬ë¥¼ ê±°ì¹˜ì§€ ì•Šê³  ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ ì˜¤í”„ë¼ì¸ì—ì„œ ë™ì‘í•  ìˆ˜ ìˆëŠ” ì›¹ ì•±ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ê²ë‹ˆë‹¤.
>
> WorkboxëŠ” APIë¥¼ ë‹¨ìˆœí™”í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ í•„ìš”í•œ íŒŒì¼ì„ ë‚´ë ¤ë°›ì„ ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ ì‚¬ì „ìºì‹± ì‘ì—…ì„ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•©ë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ ì˜¤í”„ë¼ì¸ ëª¨ë“œëŠ” ì‚¬ì´íŠ¸ê°€ ì•±ìœ¼ë¡œ ì„¤ì¹˜ë˜ë©´ í™œì„±í™”ë©ë‹ˆë‹¤. See the `offlineModeActivationStrategies` option for details.

ì‚¬ì´íŠ¸ ì‚¬ì „ìºì‹± ì´í›„ì— ì„œë¹„ìŠ¤ ì›Œì»¤ëŠ” ë°©ë¬¸ìì—ê²Œ ìºì‹œëœ ì‘ë‹µì„ ì œê³µí•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ë¹Œë“œê°€ ìƒˆë¡œìš´ ì„œë¹„ìŠ¤ ì›Œì»¤ì™€ í•¨ê»˜ ë°°í¬ë˜ë©´ ìƒˆë¡œìš´ ì•±ì´ ì„¤ì¹˜ë˜ê³  ëŒ€ê¸° ìƒíƒœë¡œ ì´ë™í•˜ê²Œ ë©ë‹ˆë‹¤. ëŒ€ê¸° ìƒíƒœì— ë“¤ì–´ê°€ë©´ ë¦¬ë¡œë“œ íŒì—…ì´ í‘œì‹œë˜ê³  ì‚¬ìš©ìì—ê²Œ ìƒˆë¡œìš´ ì½˜í…ì¸ ë¥¼ ìœ„í•´ í˜ì´ì§€ë¥¼ ë¦¬ë¡œë“œí•  ê²ƒì¸ì§€ ë¬¼ì–´ë´…ë‹ˆë‹¤. Until the user either clears the application cache or clicks the `reload` button on the popup, the service worker will continue serving the old content.

:::warning

ì˜¤í”„ë¼ì¸ ëª¨ë“œë‚˜ ì‚¬ì „ìºì‹±ì€ ì‚¬ì´íŠ¸ì˜ ëª¨ë“  ì• ì…‹ì„ ë¯¸ë¦¬ ë‚´ë ¤ë°›ì•„ì•¼ í•˜ë©° ë¶ˆí•„ìš”í•œ ëŒ€ì—­í­ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ì¢…ë¥˜ì˜ ì‚¬ì´íŠ¸ì—ì„œ ë¬´ì¡°ê±´ í•´ë‹¹ ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ëŠ” ê±´ ì¢‹ì€ ìƒê°ì€ ì•„ë‹™ë‹ˆë‹¤.

:::

## Options {#options}

### `debug` {#debug}

- Type: `boolean`
- Default: `false`

ì•„ë˜ì™€ ê°™ì€ ë””ë²„ê·¸ ëª¨ë“œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.

- Workbox ë¡œê·¸
- ì¶”ê°€ì ì¸ ë„íì‚¬ìš°ë£¨ìŠ¤ ë¡œê·¸
- ìµœì í™”ë˜ì§€ ëª»í•œ SW íŒŒì¼ ì¶œë ¥
- ì†ŒìŠ¤ë§µ

### `offlineModeActivationStrategies` {#offlinemodeactivationstrategies}

- Type: `('appInstalled' | 'mobile' | 'saveData'| 'queryString' | 'always')[]`
- Default: `['appInstalled', 'queryString', 'standalone']`

ì˜¤í”„ë¼ì¸ ëª¨ë“œë¥¼ ì ìš©í•  ìƒíƒœì— ëŒ€í•œ ì˜µì…˜ì„ ì„¤ì •í•©ë‹ˆë‹¤.

- `appInstalled`: activates for users having installed the site as an app (not 100% reliable)
- `standalone`: activates for users running the app as standalone (often the case once a PWA is installed)
- `queryString`: activates if queryString contains `offlineMode=true` (convenient for PWA debugging)
- `mobile`: activates for mobile users (`width <= 996px`)
- `saveData`: activates for users with `navigator.connection.saveData === true`
- `always`: activates for all users

:::warning

ì£¼ì˜í•´ì„œ ì‚¬ìš©í•´ì£¼ì„¸ìš”. ì¼ë¶€ ì‚¬ìš©ìëŠ” ì˜¤í”„ë¼ì¸ ëª¨ë“œë¡œ ì‚¬ìš©í•˜ë„ë¡ ê°•ì œë˜ëŠ” ê²ƒì„ ì‹«ì–´í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

:::

:::danger

ë§¤ìš° ì•ˆì •ì ì¸ ë°©ì‹ìœ¼ë¡œ PWAë¥¼ ê°ì§€í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.

The `appinstalled` event has been [removed from the specification](https://github.com/w3c/manifest/pull/836), and the [`navigator.getInstalledRelatedApps()`](https://web.dev/get-installed-related-apps/) API is only supported in recent Chrome versions and require `related_applications` declared in the manifest.

The [`standalone` strategy](https://petelepage.com/blog/2019/07/is-my-pwa-installed/) is a nice fallback to activate the offline mode (at least when running the installed app).

:::

### `injectManifestConfig` {#injectmanifestconfig}

[Workbox options](https://developer.chrome.com/docs/workbox/reference/workbox-build/#type-InjectManifestOptions) to pass to `workbox.injectManifest()`. í”„ë¦¬ìºì‹±ì„ ì ìš©í•˜ê³  ì˜¤í”„ë¼ì¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì• ì…‹ì„ ì§ì ‘ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- Type: `InjectManifestOptions`
- Default: `{}`

```js title="docusaurus.config.js"
module.exports = {
  plugins: [
    [
      '@docusaurus/plugin-pwa',
      {
        injectManifestConfig: {
          manifestTransforms: [
            //...
          ],
          modifyURLPrefix: {
            //...
          },
          // We already add regular static assets (HTML, images...) to be available offline
          // You can add more files according to your needs
          globPatterns: ['**/*.{pdf,docx,xlsx}'],
          // ...
        },
      },
    ],
  ],
};
```

### `pwaHead` {#pwahead}

- Type: `({ tagName: string; [attributeName: string]: string })[]`
- Default: `[]`

Array of objects containing `tagName` and key-value pairs for attributes to inject into the `<head>` tag. ê¸°ìˆ ì ìœ¼ë¡œ ì–´ë–¤ head íƒœê·¸ ë“  ì‚½ì…í•  ìˆ˜ ìˆì§€ë§Œ ì—¬ëŸ¬ë¶„ì˜ ì‚¬ì´íŠ¸ PWAì— ì í•©í•œ íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì´ìƒì ì…ë‹ˆë‹¤. ì•„ë˜ ëª©ë¡ì€ ì—¬ëŸ¬ë¶„ì˜ ì•±ì— ì í•©í•œ íƒœê·¸ ëª©ë¡ì…ë‹ˆë‹¤.

```js
module.exports = {
  plugins: [
    [
      '@docusaurus/plugin-pwa',
      {
        pwaHead: [
          {
            tagName: 'link',
            rel: 'icon',
            href: '/img/docusaurus.png',
          },
          {
            tagName: 'link',
            rel: 'manifest',
            href: '/manifest.json',
          },
          {
            tagName: 'meta',
            name: 'theme-color',
            content: 'rgb(37, 194, 160)',
          },
          {
            tagName: 'meta',
            name: 'apple-mobile-web-app-capable',
            content: 'yes',
          },
          {
            tagName: 'meta',
            name: 'apple-mobile-web-app-status-bar-style',
            content: '#000',
          },
          {
            tagName: 'link',
            rel: 'apple-touch-icon',
            href: '/img/docusaurus.png',
          },
          {
            tagName: 'link',
            rel: 'mask-icon',
            href: '/img/docusaurus.svg',
            color: 'rgb(37, 194, 160)',
          },
          {
            tagName: 'meta',
            name: 'msapplication-TileImage',
            content: '/img/docusaurus.png',
          },
          {
            tagName: 'meta',
            name: 'msapplication-TileColor',
            content: '#000',
          },
        ],
      },
    ],
  ],
};
```

### `swCustom` {#swcustom}

- Type: `string | undefined`
- Default: `undefined`

Workboxì— ì ìš©í•  ê·œì¹™ ì¶”ê°€ ì‹œ ìœ ìš©í•œ ì„¤ì •ì…ë‹ˆë‹¤. ì„œë¹„ìŠ¤ ì›Œì»¤ì˜ ëª¨ë“  ê¸°ëŠ¥ê³¼ í•¨ê»˜ Workbox ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ê°•ë ¥í•œ ì¶”ê°€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŠ¸ëœìŠ¤íŒŒì¼ëœ ì½”ë“œì´ë©° ìµœì‹  ES6+ êµ¬ë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ì™¸ë¶€ ê²½ë¡œì— ìˆëŠ” íŒŒì¼ì„ ìºì‹œí•˜ëŠ” ê²½ìš°ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.

```js
import {registerRoute} from 'workbox-routing';
import {StaleWhileRevalidate} from 'workbox-strategies';

// default fn export receiving some useful params
export default function swCustom(params) {
  const {
    debug, // :boolean
    offlineMode, // :boolean
  } = params;

  // Cache responses from external resources
  registerRoute((context) => {
    return [
      /graph\.facebook\.com\/.*\/picture/,
      /netlify\.com\/img/,
      /avatars1\.githubusercontent/,
    ].some((regex) => context.url.href.match(regex));
  }, new StaleWhileRevalidate());
}
```

The module should have a `default` function export, and receives some params.

### `swRegister` {#swregister}

- Type: `string | false`
- Default: `'docusaurus-plugin-pwa/src/registerSW.js'`

ì•±ì´ ì‹¤í–‰í•˜ê¸° ì „ì— ë“±ë¡ì´ ì²˜ë¦¬ë˜ë„ë¡ ë„íì‚¬ìš°ë£¨ìŠ¤ ì•± ì•ì— í•­ëª©ì„ ì¶”ê°€í•©ë‹ˆë‹¤. The default `registerSW.js` file is enough for simple registration.

Passing `false` will disable registration entirely.

## Manifest example {#manifest-example}

ë„íì‚¬ìš°ë£¨ìŠ¤ ì‚¬ì´íŠ¸ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

```mdx-code-block
import CodeBlock from '@theme/CodeBlock';

<CodeBlock className="language-json">
  {JSON.stringify(require("@site/static/manifest.json"),null,2)}
</CodeBlock>
```

## Customizing reload popup {#customizing-reload-popup}

The `@theme/PwaReloadPopup` component is rendered when a new service worker is waiting to be installed, and we suggest a reload to the user. You can [swizzle](../../swizzling.mdx) this component and implement your own UI. It will receive an `onReload` callback as props, which should be called when the `reload` button is clicked. ê·¸ë¦¬ê³  ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” ì„œë¹„ìŠ¤ ì›Œì»¤ì—ê²Œ ì„¤ì¹˜ë¥¼ ì§„í–‰í•˜ê³  í˜ì´ì§€ë¥¼ ë¦¬ë¡œë“œí•˜ë„ë¡ ì „ë‹¬í•©ë‹ˆë‹¤.

The default theme includes an implementation for the reload popup and uses [Infima Alerts](https://infima.dev/docs/components/alert).

![A screen recording of the reload process. An alert box shows in the bottom right of the window, saying "New content available". After clicking the "Refresh" button, the page's main heading changes from "Introduction" to "PWA :))".](/img/pwa_reload.gif)

Your component can render `null`, but this is not recommended: users won't have a way to get up-to-date content.
