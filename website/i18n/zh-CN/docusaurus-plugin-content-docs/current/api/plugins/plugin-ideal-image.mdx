---
sidebar_position: 8
slug: /api/plugins/@docusaurus/plugin-ideal-image
---

# ğŸ“¦ plugin-ideal-image

import APITable from '@site/src/components/APITable';

ç”Ÿæˆè¿‘ä¹ç†æƒ³çš„å›¾åƒçš„ Docusaurus æ’ä»¶ï¼ˆå“åº”å¼ã€æ‡’åŠ è½½åŠä½åƒç´ å ä½å›¾ï¼‰ã€‚

:::info

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ’ä»¶åœ¨**å¼€å‘æ¨¡å¼ä¸‹ä¸å·¥ä½œ**ï¼Œä»è€Œå…è®¸ä½ å§‹ç»ˆçœ‹åˆ°å…¨å°ºå¯¸çš„å›¾åƒã€‚ å¦‚æœä½ æƒ³è°ƒè¯•æ’ä»¶çš„è¡Œä¸ºï¼Œä½ å¯ä»¥æŠŠ [` disableInDev`](#disableInDev) é€‰é¡¹è®¾ç½®ä¸º `false`ã€‚

:::

## å®‰è£…æµç¨‹ {#installation}

```bash npm2yarn
npm install --save @docusaurus/plugin-ideal-image
```

## ç”¨æ³• {#usage}

æ­¤æ’ä»¶ä»…æ”¯æŒ PNG å’Œ JPG æ ¼å¼ã€‚

```jsx
import Image from '@theme/IdealImage';
import thumbnail from './path/to/img.png';

// ä½ çš„ React ä»£ç 
<Image img={thumbnail} />

// æˆ–è€…
<Image img={require('./path/to/img.png')} />
```

:::warning

This plugin registers a [Webpack loader](https://webpack.js.org/loaders/) that changes the type of imported/require images:

- Before: `string`
- After: `{preSrc: string, src: import("@theme/IdealImage").SrcImage}`

:::

:::warning For pnpm users

Starting with [pnpm 10](https://github.com/pnpm/pnpm/releases/tag/v10.0.0), running `pnpm install` won't run dependency install scripts by default. You'll need additional pnpm configuration ([issue](https://github.com/lovell/sharp/issues/4343)) for our `sharp` image resizing dependency to install correctly, such as:

```json title="package.json"
{
  "pnpm": {
    "onlyBuiltDependencies": ["fsevents"]
  }
}
```

:::

## é…ç½® {#configuration}

æ¥å—çš„å­—æ®µï¼š

```mdx-code-block
<APITable>
```

| é€‰é¡¹             | ç±»å‹         | é»˜è®¤å€¼                                           | æè¿°                                                                                                                                           |
| -------------- | ---------- | --------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`         | `string`   | `ideal-img/[name].[hash:hex:7].[width].[ext]` | è¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶åæ¨¡æ¿ã€‚                                                                                                                                  |
| `sizes`        | `number[]` | _åŸå§‹å°ºå¯¸_                                        | æŒ‡å®šä½ æƒ³ä½¿ç”¨çš„æ‰€æœ‰å®½åº¦ã€‚ å¦‚æœæŒ‡å®šå°ºå¯¸è¶…è¿‡äº†åŸå§‹å›¾åƒå®½åº¦ï¼Œåˆ™ä½¿ç”¨åè€…ï¼ˆå³å›¾åƒä¸ä¼šè¢«æ”¾å¤§ï¼‰ã€‚                                                                                                |
| `size`         | `number`   | _åŸå§‹å°ºå¯¸_                                        | æŒ‡å®šä½ æƒ³ä½¿ç”¨çš„å”¯ä¸€å®½åº¦ã€‚å¦‚æœæŒ‡å®šå°ºå¯¸è¶…è¿‡äº†åŸå§‹å›¾åƒå®½åº¦ï¼Œåˆ™ä½¿ç”¨åè€…ï¼ˆå³å›¾åƒä¸ä¼šè¢«æ”¾å¤§ï¼‰ã€‚                                                                                                 |
| `min`          | `number`   |                                               | é™¤äº†æ‰‹åŠ¨æŒ‡å®š `sizes` å¤–ï¼Œä½ è¿˜å¯ä»¥æŒ‡å®š `min`ã€`max` åŠ `steps`ï¼Œç„¶åè‡ªåŠ¨ç”Ÿæˆç›¸åº”å°ºå¯¸ã€‚                                                                                    |
| `max`          | `number`   |                                               | å‚è§ä¸Šæ–¹çš„ `min`ã€‚                                                                                                                                 |
| `steps`        | `number`   | `4`                                           | é…ç½®åœ¨ `min` ä¸ `max` ä¹‹é—´ç”Ÿæˆçš„å›¾åƒæ•°é‡ï¼ˆåŒ…æ‹¬ä¸Šä¸‹é™ï¼‰ã€‚                                                                                                          |
| `quality`      | `number`   | `85`                                          | JPEG å‹ç¼©è´¨é‡ã€‚                                                                                                                                   |
| `disableInDev` | `boolean`  | `true`                                        | è®¾ç½®ä¸º `false` åï¼Œä½ å¯ä»¥åœ¨å¼€å‘æ¨¡å¼ä¸‹æµ‹è¯•æ’ä»¶è¡Œä¸ºã€‚ **æç¤º**ï¼šå¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç”¨[ç½‘ç»œèŠ‚æµ](https://www.browserstack.com/guide/how-to-perform-network-throttling-in-chrome)æ¥æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œã€‚ |

```mdx-code-block
</APITable>
```

### ç¤ºä¾‹é…ç½® {#ex-config}

è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹é…ç½®ï¼š

```js title="docusaurus.config.js"
export default {
  plugins: [
    [
      '@docusaurus/plugin-ideal-image',
      // highlight-start
      {
        quality: 70,
        max: 1030, // max resized image's size.
        min: 640, // æœ€å°ç¼©æ”¾å›¾ç‰‡å°ºå¯¸ã€‚ å¦‚æœåŸå§‹å€¼æ¯”è¿™è¿˜ä½ï¼Œä¼šä½¿ç”¨åŸå›¾å°ºå¯¸ã€‚
        steps: 2, // åœ¨ min å’Œ max ä¹‹é—´æœ€å¤šç”Ÿæˆçš„å›¾ç‰‡æ•°é‡ï¼ˆåŒ…å«ä¸¤ç«¯ç‚¹ï¼‰
        disableInDev: false,
      },
      // highlight-end
    ],
  ],
};
```
